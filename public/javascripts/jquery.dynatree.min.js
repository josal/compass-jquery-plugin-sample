var _canLog=true;function _log(g){if(_canLog){var k=Array.prototype.slice.apply(arguments,[1]),m=new Date;m=m.getHours()+":"+m.getMinutes()+":"+m.getSeconds()+"."+m.getMilliseconds();k[0]=m+" - "+k[0];try{switch(g){case "info":window.console.info.apply(window.console,k);break;case "warn":window.console.warn.apply(window.console,k);break;default:window.console.log.apply(window.console,k)}}catch(o){window.console||(_canLog=false)}}}
function logMsg(){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}var getDynaTreePersistData=undefined,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;
(function(g){function k(a){for(var b=5;a&&b--;){if(a.dtnode)return a.dtnode;a=a.parentNode}return null}function m(a){var b=a.options.dnd||null;if(b&&(b.onDragStart||b.onDrop))s();b&&b.onDragStart&&a.$tree.draggable({addClasses:false,appendTo:"body",containment:false,delay:0,distance:4,revert:false,connectToDynatree:true,helper:function(c){var d=k(c.target);return d.tree._onDragEvent("helper",d,null,c,null,null)},_last:null});b&&b.onDrop&&a.$tree.droppable({addClasses:false,tolerance:"intersect",greedy:false,
_last:null})}var o={create:function(){return function(){this.initialize.apply(this,arguments)}}},p=o.create();p.prototype={initialize:function(a,b,c){this.parent=a;this.tree=b;if(typeof c==="string")c={title:c};if(c.key===undefined)c.key="_"+b._nodeCount++;this.data=g.extend({},g.ui.dynatree.nodedatadefaults,c);this.childList=this.ul=this.span=this.li=null;this.bSelected=this.bExpanded=this.hasSubSel=this.isLoading=false},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+
"'"},toDict:function(a,b){var c=g.extend({},this.data);c.activate=this.tree.activeNode===this;c.focus=this.tree.focusNode===this;c.expand=this.bExpanded;c.select=this.bSelected;b&&b(c);if(a&&this.childList){c.children=[];for(var d=0;d<this.childList.length;d++)c.children.push(this.childList[d].toDict(true,b))}else delete c.children;return c},fromDict:function(a){var b=a.children;if(b===undefined){this.data=g.extend(this.data,a);this.render()}else{a=g.extend({},a);a.children=undefined;this.data=g.extend(this.data,
a);this.removeChildren();this.addChild(b)}},_getInnerHtml:function(){var a=this.tree.options,b=this.tree.cache,c=this.getLevel(),d="";if(c<a.minExpandLevel){if(c>1)d+=b.tagConnector}else d+=this.hasChildren()!==false?b.tagExpander:b.tagConnector;if(a.checkbox&&this.data.hideCheckbox!==true&&!this.data.isStatusNode)d+=b.tagCheckbox;if(this.data.icon)d+="<img src='"+a.imagePath+this.data.icon+"' alt='' />";else if(this.data.icon!==false)d+=b.tagNodeIcon;b=this.data.tooltip?" title='"+this.data.tooltip+
"'":"";d+=a.noLink||this.data.noLink?"<span style='display: inline-block;' class='"+a.classNames.title+"'"+b+">"+this.data.title+"</span>":"<a href='#' class='"+a.classNames.title+"'"+b+">"+this.data.title+"</a>";return d},_fixOrder:function(){var a=this.childList;if(a)for(var b=this.ul.firstChild,c=0;c<a.length-1;c++){var d=a[c],e=b.dtnode;if(d!==e){this.tree.logDebug("_fixOrder: mismatch at index "+c+": "+d+" != "+e);this.ul.insertBefore(d.li,e.li)}else b=b.nextSibling}},render:function(a){var b=
this.tree.options,c=b.classNames,d=this.isLastSibling();if(!this.parent&&!this.ul){this.li=this.span=null;this.ul=document.createElement("ul");this.ul.className=b.minExpandLevel>1?c.container+" "+c.noConnector:c.container}else if(this.parent){if(!this.li){this.li=document.createElement("li");this.li.dtnode=this;if(this.data.key&&b.generateIds)this.li.id=b.idPrefix+this.data.key;this.span=document.createElement("span");this.span.className=c.title;this.li.appendChild(this.span);if(!this.parent.ul){this.parent.ul=
document.createElement("ul");this.parent.ul.style.display="none";this.parent.li.appendChild(this.parent.ul)}this.parent.ul.appendChild(this.li)}this.span.innerHTML=this._getInnerHtml();var e=[];e.push(c.node);this.data.isFolder&&e.push(c.folder);this.bExpanded&&e.push(c.expanded);this.hasChildren()!==false&&e.push(c.hasChildren);this.data.isLazy&&this.childList===null&&e.push(c.lazy);d&&e.push(c.lastsib);this.bSelected&&e.push(c.selected);this.hasSubSel&&e.push(c.partsel);this.tree.activeNode===this&&
e.push(c.active);this.data.addClass&&e.push(this.data.addClass);e.push(c.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(this.data.isLazy&&this.childList===null?"d":"")+(d?"l":""));e.push(c.combinedIconPrefix+(this.bExpanded?"e":"c")+(this.data.isFolder?"f":""));this.span.className=e.join(" ");this.li.className=d?c.lastsib:""}if(this.bExpanded&&this.childList){for(c=0;c<this.childList.length;c++)this.childList[c].render();this._fixOrder()}if(this.ul){c=this.ul.style.display==="none";if(a&&b.fx&&
!!c===!!this.bExpanded){a=b.fx.duration||200;g(this.ul).animate(b.fx,a)}else this.ul.style.display=this.bExpanded||!this.parent?"":"none"}},getKeyPath:function(a){var b=[];this.visitParents(function(c){c.parent&&b.unshift(c.data.key)},!a);return"/"+b.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return this.childList},hasChildren:function(){if(this.data.isLazy){if(this.childList===null||this.childList===undefined)return;else if(this.childList.length===
0)return false;else if(this.childList.length===1&&this.childList[0].isStatusNode())return;return true}return!!this.childList},isFirstSibling:function(){var a=this.parent;return!a||a.childList[0]===this},isLastSibling:function(){var a=this.parent;return!a||a.childList[a.childList.length-1]===this},getPrevSibling:function(){if(!this.parent)return null;for(var a=this.parent.childList,b=1;b<a.length;b++)if(a[b]===this)return a[b-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var a=
this.parent.childList,b=0;b<a.length-1;b++)if(a[b]===this)return a[b+1];return null},isStatusNode:function(){return this.data.isStatusNode===true},isChildOf:function(a){return this.parent&&this.parent===a},isDescendantOf:function(a){if(!a)return false;for(var b=this.parent;b;){if(b===a)return true;b=b.parent}return false},sortChildren:function(a,b){var c=this.childList;if(c){a=a||function(e,f){return e.data.title===f.data.title?0:e.data.title>f.data.title};c.sort(a);if(b)for(var d=0;d<c.length;d++)c[d].childList&&
c[d].sortChildren(a,"$norender$");b!=="$norender$"&&this.render()}},_setStatusNode:function(a){var b=this.childList?this.childList[0]:null;if(a)if(b){a.isStatusNode=true;a.key="_statusNode";b.data=a;b.render()}else{a.isStatusNode=true;a.key="_statusNode";this.addChild(a)}else if(b&&b.isStatusNode()){try{this.ul&&this.ul.removeChild(b.li)}catch(c){}if(this.childList.length===1)this.childList=null;else this.childList.shift()}},setLazyNodeStatus:function(a,b){var c=b&&b.tooltip?b.tooltip:null,d=b&&b.info?
" ("+b.info+")":"";switch(a){case DTNodeStatus_Ok:this._setStatusNode(null);g(this.span).removeClass(this.tree.options.classNames.nodeLoading);this.isLoading=false;this.render();if(this.tree.options.autoFocus)this===this.tree.tnRoot&&this.childList?this.childList[0].focus():this.focus();break;case DTNodeStatus_Loading:this.isLoading=true;g(this.span).addClass(this.tree.options.classNames.nodeLoading);this.parent||this._setStatusNode({title:this.tree.options.strings.loading+d,tooltip:c,addClass:this.tree.options.classNames.nodeWait});
break;case DTNodeStatus_Error:this.isLoading=false;this._setStatusNode({title:this.tree.options.strings.loadError+d,tooltip:c,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+a+"'.";}},_parentList:function(a,b){for(var c=[],d=b?this:this.parent;d;){if(a||d.parent)c.unshift(d);d=d.parent}return c},getLevel:function(){for(var a=0,b=this.parent;b;){a++;b=b.parent}return a},_getTypeForOuterNodeEvent:function(a){var b=this.tree.options.classNames,c=a.target;
if(c.className.indexOf(b.node)<0)return null;var d=a.pageX-c.offsetLeft;a=a.pageY-c.offsetTop;for(var e=0;e<c.childNodes.length;e++){var f=c.childNodes[e],h=f.offsetLeft-c.offsetLeft,i=f.offsetTop-c.offsetTop,j=f.clientWidth,l=f.clientHeight;if(d>=h&&d<=h+j&&a>=i&&a<=i+l)if(f.className==b.title)return"title";else if(f.className==b.expander)return"expander";else if(f.className==b.checkbox)return"checkbox";else if(f.className==b.nodeIcon)return"icon"}return"prefix"},getEventTargetType:function(a){var b=
a&&a.target?a.target.className:"",c=this.tree.options.classNames;if(b===c.title)return"title";else if(b===c.expander)return"expander";else if(b===c.checkbox)return"checkbox";else if(b===c.nodeIcon)return"icon";else if(b===c.empty||b===c.vline||b===c.connector)return"prefix";else if(b.indexOf(c.node)>=0)return this._getTypeForOuterNodeEvent(a);return null},isVisible:function(){for(var a=this._parentList(true,false),b=0;b<a.length;b++)if(!a[b].bExpanded)return false;return true},makeVisible:function(){for(var a=
this._parentList(true,false),b=0;b<a.length;b++)a[b]._expand(true)},focus:function(){this.makeVisible();try{g(this.span).find(">a").focus()}catch(a){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(a,b){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",a,b,this);var c=this.tree.options;if(!this.data.isStatusNode)if(!(b&&c.onQueryActivate&&c.onQueryActivate.call(this.tree,a,this)===false))if(a){if(this.tree.activeNode){if(this.tree.activeNode===this)return;
this.tree.activeNode.deactivate()}c.activeVisible&&this.makeVisible();this.tree.activeNode=this;c.persist&&g.cookie(c.cookieId+"-active",this.data.key,c.cookie);this.tree.persistence.activeKey=this.data.key;g(this.span).addClass(c.classNames.active);b&&c.onActivate&&c.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){c=this.tree.options;if(!(c.onQueryActivate&&c.onQueryActivate.call(this.tree,false,this)===false)){g(this.span).removeClass(c.classNames.active);c.persist&&g.cookie(c.cookieId+
"-active","",c.cookie);this.tree.persistence.activeKey=null;this.tree.activeNode=null;b&&c.onDeactivate&&c.onDeactivate.call(this.tree,this)}}},activate:function(){this._activate(true,true)},activateSilently:function(){this._activate(true,false)},deactivate:function(){this._activate(false,true)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var a=true,b=false;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:a=false;b=true;break;case 3:a=b=true}if(this.parent===
null)b=false;if(b){this.toggleExpand();this.focus()}a&&this.activate()},_setSubSel:function(a){if(a){this.hasSubSel=true;g(this.span).addClass(this.tree.options.classNames.partsel)}else{this.hasSubSel=false;g(this.span).removeClass(this.tree.options.classNames.partsel)}},_fixSelectionState:function(){if(this.bSelected){this.visit(function(e){e.parent._setSubSel(true);e._select(true,false,false)});for(var a=this.parent;a;){a._setSubSel(true);for(var b=true,c=0;c<a.childList.length;c++){var d=a.childList[c];
if(!d.bSelected&&!d.data.isStatusNode){b=false;break}}b&&a._select(true,false,false);a=a.parent}}else{this._setSubSel(false);this.visit(function(e){e._setSubSel(false);e._select(false,false,false)});for(a=this.parent;a;){a._select(false,false,false);b=false;for(c=0;c<a.childList.length;c++)if(a.childList[c].bSelected||a.childList[c].hasSubSel){b=true;break}a._setSubSel(b);a=a.parent}}},_select:function(a,b,c){var d=this.tree.options;if(!this.data.isStatusNode)if(this.bSelected!==a)if(!(b&&d.onQuerySelect&&
d.onQuerySelect.call(this.tree,a,this)===false)){d.selectMode==1&&a&&this.tree.visit(function(e){if(e.bSelected){e._select(false,false,false);return false}});if(this.bSelected=a){d.persist&&this.tree.persistence.addSelect(this.data.key);g(this.span).addClass(d.classNames.selected);c&&d.selectMode===3&&this._fixSelectionState();b&&d.onSelect&&d.onSelect.call(this.tree,true,this)}else{d.persist&&this.tree.persistence.clearSelect(this.data.key);g(this.span).removeClass(d.classNames.selected);c&&d.selectMode===
3&&this._fixSelectionState();b&&d.onSelect&&d.onSelect.call(this.tree,false,this)}}},select:function(a){if(this.data.unselectable)return this.bSelected;return this._select(a!==false,true,true)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},_loadContent:function(){try{var a=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this);this.setLazyNodeStatus(DTNodeStatus_Loading);if(true===a.onLazyRead.call(this.tree,this)){this.setLazyNodeStatus(DTNodeStatus_Ok);
this.tree.logDebug("_loadContent: succeeded - %o",this)}}catch(b){this.tree.logWarning("_loadContent: failed - %o",b);this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+b})}},_expand:function(a,b){if(this.bExpanded===a)this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",a,this);else{this.tree.logDebug("dtnode._expand(%o) - %o",a,this);var c=this.tree.options;if(!a&&this.getLevel()<c.minExpandLevel)this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",a,this);else if(!(c.onQueryExpand&&
c.onQueryExpand.call(this.tree,a,this)===false)){this.bExpanded=a;if(c.persist)a?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key);this.render(!(this.data.isLazy&&this.childList===null)&&!this.isLoading&&!b);if(this.bExpanded&&this.parent&&c.autoCollapse)for(var d=this._parentList(false,true),e=0;e<d.length;e++)d[e].collapseSiblings();c.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate();if(a&&this.data.isLazy&&
this.childList===null&&!this.isLoading)this._loadContent();else c.onExpand&&c.onExpand.call(this.tree,a,this)}}},expand:function(a){a=a!==false;!this.childList&&!this.data.isLazy&&a||this.parent===null&&!a||this._expand(a)},scheduleAction:function(a,b){if(this.tree.timer){clearTimeout(this.tree.timer);logMsg("clearTimeout(%o)",this.tree.timer)}var c=this;switch(a){case "cancel":break;case "expand":this.tree.timer=setTimeout(function(){logMsg("setTimeout: trigger");c.expand(true)},b);break;case "activate":this.tree.timer=
setTimeout(function(){c.activate()},b);break;default:throw"Invalid mode "+a;}logMsg("setTimeout(%s, %s): %s",a,b,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(this.parent!==null)for(var a=this.parent.childList,b=0;b<a.length;b++)a[b]!==this&&a[b].bExpanded&&a[b]._expand(false)},_onClick:function(a){a=this.getEventTargetType(a);if(a==="expander"){this.toggleExpand();this.focus()}else if(a==="checkbox"){this.toggleSelect();this.focus()}else{this._userActivate();
a=this.span.getElementsByTagName("a");if(a[0])g.browser.msie||a[0].focus();else return true}return false},_onDblClick:function(){},_onKeydown:function(a){var b=true;switch(a.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:if(this.bExpanded){this.toggleExpand();this.focus()}else this.parent&&this.parent.parent&&this.parent.focus();break;
case 39:if(!this.bExpanded&&(this.childList||this.data.isLazy)){this.toggleExpand();this.focus()}else this.childList&&this.childList[0].focus();break;case 38:for(var c=this.getPrevSibling();c&&c.bExpanded&&c.childList;)c=c.childList[c.childList.length-1];if(!c&&this.parent&&this.parent.parent)c=this.parent;c&&c.focus();break;case 40:if(this.bExpanded&&this.childList)c=this.childList[0];else{a=this._parentList(false,true);for(var d=a.length-1;d>=0;d--)if(c=a[d].getNextSibling())break}c&&c.focus();
break;default:b=false}return!b},_onKeypress:function(){},_onFocus:function(a){var b=this.tree.options;if(a.type=="blur"||a.type=="focusout"){b.onBlur&&b.onBlur.call(this.tree,this);this.tree.tnFocused&&g(this.tree.tnFocused.span).removeClass(b.classNames.focused);this.tree.tnFocused=null;b.persist&&g.cookie(b.cookieId+"-focus","",b.cookie)}else if(a.type=="focus"||a.type=="focusin"){if(this.tree.tnFocused&&this.tree.tnFocused!==this){this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",
this.tree.tnFocused);g(this.tree.tnFocused.span).removeClass(b.classNames.focused)}this.tree.tnFocused=this;b.onFocus&&b.onFocus.call(this.tree,this);g(this.tree.tnFocused.span).addClass(b.classNames.focused);b.persist&&g.cookie(b.cookieId+"-focus",this.data.key,b.cookie)}},visit:function(a,b){var c=true;if(b===true){c=a(this);if(c===false||c=="skip")return c}if(this.childList)for(var d=0;d<this.childList.length;d++){c=this.childList[d].visit(a,true);if(c===false)break}return c},visitParents:function(a,
b){if(b&&a(this)===false)return false;for(var c=this.parent;c;){if(a(c)===false)return false;c=c.parent}return true},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(a){var b=this.childList;if(b.length==1){if(a!==b[0])throw"removeChild: invalid child";return this.removeChildren()}a===this.tree.activeNode&&a.deactivate();if(this.tree.options.persist){a.bSelected&&this.tree.persistence.clearSelect(a.data.key);a.bExpanded&&
this.tree.persistence.clearExpand(a.data.key)}a.removeChildren(true);this.ul.removeChild(a.li);for(var c=0;c<b.length;c++)if(b[c]===a){this.childList.splice(c,1);delete a;break}},removeChildren:function(a,b){this.tree.logDebug("%s.removeChildren(%o)",this,a);var c=this.tree,d=this.childList;if(d){for(var e=0;e<d.length;e++){var f=d[e];f===c.activeNode&&!b&&f.deactivate();if(this.tree.options.persist&&!b){f.bSelected&&this.tree.persistence.clearSelect(f.data.key);f.bExpanded&&this.tree.persistence.clearExpand(f.data.key)}f.removeChildren(true,
b);this.ul&&this.ul.removeChild(f.li);delete f}this.childList=null}if(!a){this.isLoading=false;this.render()}},setTitle:function(a){this.fromDict({title:a})},reload:function(){throw"Use reloadChildren() instead";},reloadChildren:function(a){if(this.parent===null)throw"Use tree.reload() instead";else if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(a){var b=this,c="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(c,function(d,e,f){b.tree.$tree.unbind(c);
b.tree.logInfo("loaded %o, %o, %o",d,e,f);if(e!==b)throw"got invalid load event";a.call(b.tree,e,f)})}this.removeChildren();this._loadContent()},_loadKeyPath:function(a,b){var c=this.tree;c.logDebug("%s._loadKeyPath(%s)",this,a);if(a==="")throw"Key path must not be empty";var d=a.split(c.options.keyPathSeparator);if(d[0]==="")throw"Key path must be relative (don't start with '/')";for(var e=d.shift(),f=0;f<this.childList.length;f++){var h=this.childList[f];if(h.data.key===e){if(d.length===0)b.call(c,
h,"ok");else if(h.data.isLazy&&(h.childList===null||h.childList===undefined)){c.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,a,h);var i=this;h.reloadChildren(function(j,l){if(l){c.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",j,a,j);b.call(c,h,"loaded");j._loadKeyPath(d.join(c.options.keyPathSeparator),b)}else{c.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",i,a);b.call(c,h,"error")}})}else{b.call(c,h,"loaded");h._loadKeyPath(d.join(c.options.keyPathSeparator),b)}return}}c.logWarning("Node not found: "+
e)},resetLazy:function(){if(this.parent===null)throw"Use tree.reload() instead";else if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(false);this.removeChildren()},_addChildNode:function(a,b){var c=this.tree,d=c.options,e=c.persistence;a.parent=this;if(this.childList===null)this.childList=[];else b||g(this.childList[this.childList.length-1].span).removeClass(d.classNames.lastsib);if(b){var f=g.inArray(b,this.childList);if(f<0)throw"<beforeNode> must be a child of <this>";
this.childList.splice(f,0,a)}else this.childList.push(a);f=c.isInitializing();if(d.persist&&e.cookiesFound&&f){if(e.activeKey==a.data.key)c.activeNode=a;if(e.focusedKey==a.data.key)c.focusNode=a;a.bExpanded=g.inArray(a.data.key,e.expandedKeyList)>=0;a.bSelected=g.inArray(a.data.key,e.selectedKeyList)>=0}else{if(a.data.activate){c.activeNode=a;if(d.persist)e.activeKey=a.data.key}if(a.data.focus){c.focusNode=a;if(d.persist)e.focusedKey=a.data.key}a.bExpanded=a.data.expand===true;a.bExpanded&&d.persist&&
e.addExpand(a.data.key);a.bSelected=a.data.select===true;a.bSelected&&d.persist&&e.addSelect(a.data.key)}if(d.minExpandLevel>=a.getLevel())this.bExpanded=true;if(a.bSelected&&d.selectMode==3)for(d=this;d;){d.hasSubSel||d._setSubSel(true);d=d.parent}c.bEnableUpdate&&this.render();return a},addChild:function(a,b){if(typeof a=="string")throw"Invalid data type for "+a;else if(!a||a.length===0)return;else if(a instanceof p)return this._addChildNode(a,b);a.length||(a=[a]);for(var c=this.tree.enableUpdate(false),
d=null,e=0;e<a.length;e++){var f=a[e],h=this._addChildNode(new p(this,this.tree,f),b);d||(d=h);f.children&&h.addChild(f.children,null)}this.tree.enableUpdate(c);return d},append:function(a){this.tree.logWarning("node.append() is deprecated (use node.addChild() instead).");return this.addChild(a,null)},appendAjax:function(a){this.removeChildren(false,true);this.setLazyNodeStatus(DTNodeStatus_Loading);if(a.debugLazyDelay){var b=a.debugLazyDelay,c=this;a.debugLazyDelay=0;this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+
b);setTimeout(function(){c.appendAjax(a)},b)}else{c=this;var d=a.success,e=a.error,f="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,h=g.extend({},this.tree.options.ajaxDefaults,a,{success:function(i){var j=c.tree.phase;c.tree.phase="init";if(g.isArray(i)&&i.length===0)c.childList=[];else c.addChild(i,null);c.tree.phase="postInit";d&&d.call(h,c);c.tree.logInfo("trigger "+f);c.tree.$tree.trigger(f,[c,true]);c.tree.phase=j;c.setLazyNodeStatus(DTNodeStatus_Ok)},error:function(i,j,
l){c.tree.logWarning("appendAjax failed:",j,":\n",i,"\n",l);e&&e.call(h,c,i,j,l);c.tree.$tree.trigger(f,[c,false]);c.setLazyNodeStatus(DTNodeStatus_Error,{info:j,tooltip:""+l})}});g.ajax(h)}},move:function(a,b){if(this!==a){if(!this.parent)throw"Cannot move system root";if(b===undefined||b=="over")b="child";var c=this.parent,d=b==="child"?a:a.parent;if(d.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(this.parent.childList.length==1){this.parent.childList=null;this.parent.bExpanded=
false}else{var e=g.inArray(this,this.parent.childList);if(e<0)throw"Internal error";this.parent.childList.splice(e,1)}this.parent.ul.removeChild(this.li);this.parent=d;if(d.hasChildren())switch(b){case "child":d.childList.push(this);break;case "before":e=g.inArray(a,d.childList);if(e<0)throw"Internal error";d.childList.splice(e,0,this);break;case "after":e=g.inArray(a,d.childList);if(e<0)throw"Internal error";d.childList.splice(e+1,0,this);break;default:throw"Invalid mode "+b;}else{d.childList=[this];
if(!d.ul){d.ul=document.createElement("ul");d.ul.style.display="none";d.li.appendChild(d.ul)}}d.ul.appendChild(this.li);if(this.tree!==a.tree){this.visit(function(f){f.tree=a.tree},null,true);throw"Not yet implemented.";}c.isDescendantOf(d)||c.render();d.isDescendantOf(c)||d.render()}},lastentry:undefined};var n=o.create();n._getTreePersistData=function(a,b){var c=new n(a,b);c.read();return c.toDict()};getDynaTreePersistData=n._getTreePersistData;n.prototype={initialize:function(a,b){this._log("DynaTreeStatus: initialize");
if(a===undefined)a=g.ui.dynatree.prototype.options.cookieId;b=g.extend({},g.ui.dynatree.prototype.options.cookie,b);this.cookieId=a;this.cookieOpts=b;this.cookiesFound=undefined;this.selectedKeyList=this.expandedKeyList=this.focusedKey=this.activeKey=null},_log:function(){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)},read:function(){this._log("DynaTreeStatus: read");this.cookiesFound=false;var a=g.cookie(this.cookieId+"-active");this.activeKey=a===null?"":a;if(a!==
null)this.cookiesFound=true;a=g.cookie(this.cookieId+"-focus");this.focusedKey=a===null?"":a;if(a!==null)this.cookiesFound=true;a=g.cookie(this.cookieId+"-expand");this.expandedKeyList=a===null?[]:a.split(",");if(a!==null)this.cookiesFound=true;a=g.cookie(this.cookieId+"-select");this.selectedKeyList=a===null?[]:a.split(",");if(a!==null)this.cookiesFound=true},write:function(){this._log("DynaTreeStatus: write");g.cookie(this.cookieId+"-active",this.activeKey===null?"":this.activeKey,this.cookieOpts);
g.cookie(this.cookieId+"-focus",this.focusedKey===null?"":this.focusedKey,this.cookieOpts);g.cookie(this.cookieId+"-expand",this.expandedKeyList===null?"":this.expandedKeyList.join(","),this.cookieOpts);g.cookie(this.cookieId+"-select",this.selectedKeyList===null?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(a){this._log("addExpand(%o)",a);if(g.inArray(a,this.expandedKeyList)<0){this.expandedKeyList.push(a);g.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},
clearExpand:function(a){this._log("clearExpand(%o)",a);a=g.inArray(a,this.expandedKeyList);if(a>=0){this.expandedKeyList.splice(a,1);g.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts)}},addSelect:function(a){this._log("addSelect(%o)",a);if(g.inArray(a,this.selectedKeyList)<0){this.selectedKeyList.push(a);g.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},clearSelect:function(a){this._log("clearSelect(%o)",a);a=g.inArray(a,this.selectedKeyList);
if(a>=0){this.selectedKeyList.splice(a,1);g.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts)}},isReloading:function(){return this.cookiesFound===true},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:undefined};var q=o.create();q.version="$Version:$";q.prototype={initialize:function(a){this.phase="init";this.$widget=a;this.options=
a.options;this.$tree=a.element;this.timer=null;this.divTree=this.$tree.get(0);m(this)},_load:function(a){var b=this.options;this.bEnableUpdate=true;this._nodeCount=1;this.focusNode=this.activeNode=null;b.rootVisible!==undefined&&_log("warn","Option 'rootVisible' is no longer supported.");b.title!==undefined&&_log("warn","Option 'title' is no longer supported.");if(b.minExpandLevel<1){_log("warn","Option 'minExpandLevel' must be >= 1.");b.minExpandLevel=1}if(b.classNames!==g.ui.dynatree.prototype.options.classNames)b.classNames=
g.extend({},g.ui.dynatree.prototype.options.classNames,b.classNames);if(b.ajaxDefaults!==g.ui.dynatree.prototype.options.ajaxDefaults)b.ajaxDefaults=g.extend({},g.ui.dynatree.prototype.options.ajaxDefaults,b.ajaxDefaults);if(b.dnd!==g.ui.dynatree.prototype.options.dnd)b.dnd=g.extend({},g.ui.dynatree.prototype.options.dnd,b.dnd);b.imagePath||g("script").each(function(){if(this.src.search(/.*dynatree[^\/]*\.js$/i)>=0){b.imagePath=this.src.indexOf("/")>=0?this.src.slice(0,this.src.lastIndexOf("/"))+
"/skin/":"skin/";logMsg("Guessing imagePath from '%s': '%s'",this.src,b.imagePath);return false}});this.persistence=new n(b.cookieId,b.cookie);if(b.persist){g.cookie||_log("warn","Please include jquery.cookie.js to use persistence.");this.persistence.read()}this.logDebug("DynaTree.persistence: %o",this.persistence.toDict());this.cache={tagEmpty:"<span class='"+b.classNames.empty+"'></span>",tagVline:"<span class='"+b.classNames.vline+"'></span>",tagExpander:"<span class='"+b.classNames.expander+"'></span>",
tagConnector:"<span class='"+b.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+b.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+b.classNames.checkbox+"'></span>",lastentry:undefined};if(b.children||b.initAjax&&b.initAjax.url||b.initId)g(this.divTree).empty();else this.divRoot&&g(this.divRoot).remove();this.tnRoot=new p(null,this,{});this.tnRoot.bExpanded=true;this.tnRoot.render();this.divTree.appendChild(this.tnRoot.ul);var c=this.tnRoot,d=b.persist&&this.persistence.isReloading(),
e=false,f=this.enableUpdate(false);this.logDebug("Dynatree._load(): read tree structure...");if(b.children)c.addChild(b.children);else if(b.initAjax&&b.initAjax.url){e=true;c.data.isLazy=true;this._reloadAjax(a)}else if(b.initId)this._createFromTag(c,g("#"+b.initId));else{a=this.$tree.find(">ul:first").hide();this._createFromTag(c,a);a.remove()}this._checkConsistency();this.logDebug("Dynatree._load(): render nodes...");this.enableUpdate(f);this.logDebug("Dynatree._load(): bind events...");this.$widget.bind();
this.logDebug("Dynatree._load(): postInit...");this.phase="postInit";b.persist&&this.persistence.write();if(this.focusNode&&this.focusNode.isVisible()){this.logDebug("Focus on init: %o",this.focusNode);this.focusNode.focus()}!e&&b.onPostInit&&b.onPostInit.call(this,d,false);this.phase="idle"},_reloadAjax:function(a){var b=this.options;if(!b.initAjax||!b.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var c=this.persistence,d=g.extend({},b.initAjax);if(d.addActiveKey)d.data.activeKey=c.activeKey;
if(d.addFocusedKey)d.data.focusedKey=c.focusedKey;if(d.addExpandedKeyList)d.data.expandedKeyList=c.expandedKeyList.join(",");if(d.addSelectedKeyList)d.data.selectedKeyList=c.selectedKeyList.join(",");if(b.onPostInit){d.success&&this.logWarning("initAjax: success callback is ignored when onPostInit was specified.");d.error&&this.logWarning("initAjax: error callback is ignored when onPostInit was specified.");var e=c.isReloading();d.success=function(f){b.onPostInit.call(f.tree,e,false);a&&a.call(f.tree,
"ok")};d.error=function(f){b.onPostInit.call(f.tree,e,true);a&&a.call(f.tree,"error")}}this.logDebug("Dynatree._init(): send Ajax request...");this.tnRoot.appendAjax(d)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(true)},getPersistData:function(){return this.persistence.toDict()},logDebug:function(){if(this.options.debugLevel>=2){Array.prototype.unshift.apply(arguments,["debug"]);_log.apply(this,arguments)}},logInfo:function(){if(this.options.debugLevel>=
1){Array.prototype.unshift.apply(arguments,["info"]);_log.apply(this,arguments)}},logWarning:function(){Array.prototype.unshift.apply(arguments,["warn"]);_log.apply(this,arguments)},isInitializing:function(){return this.phase=="init"||this.phase=="postInit"},isReloading:function(){return(this.phase=="init"||this.phase=="postInit")&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return this.phase=="userEvent"},redraw:function(){this.logDebug("dynatree.redraw()...");this.tnRoot.render(false);
this.logDebug("dynatree.redraw() done.")},reload:function(a){this._load(a)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(a){var b=document.getElementById(this.options.idPrefix+a);if(b)return b.dtnode?b.dtnode:null;var c=null;this.visit(function(d){if(d.data.key==a){c=d;return false}},true);return c},getActiveNode:function(){return this.activeNode},reactivate:function(a){var b=this.activeNode;if(b){this.activeNode=
null;b.activate();a&&b.focus()}},getSelectedNodes:function(a){var b=[];this.tnRoot.visit(function(c){if(c.bSelected){b.push(c);if(a===true)return"skip"}});return b},activateKey:function(a){a=a===null?null:this.getNodeByKey(a);if(!a){this.activeNode&&this.activeNode.deactivate();return this.activeNode=null}a.focus();a.activate();return a},loadKeyPath:function(a,b){var c=a.split(this.options.keyPathSeparator);c[0]===""&&c.shift();if(c[0]==this.tnRoot.data.key){this.logDebug("Removed leading root key.");
c.shift()}a=c.join(this.options.keyPathSeparator);return this.tnRoot._loadKeyPath(a,b)},selectKey:function(a,b){var c=this.getNodeByKey(a);if(!c)return null;c.select(b);return c},enableUpdate:function(a){if(this.bEnableUpdate==a)return a;(this.bEnableUpdate=a)&&this.redraw();return!a},visit:function(a,b){return this.tnRoot.visit(a,b)},_createFromTag:function(a,b){var c=this;b.find(">li").each(function(){var d=g(this),e=d.find(">span:first");if(e.length)e=e.html();else{e=d.html();var f=e.search(/<ul/i);
e=f>=0?g.trim(e.substring(0,f)):g.trim(e)}e={title:e,isFolder:d.hasClass("folder"),isLazy:d.hasClass("lazy"),expand:d.hasClass("expanded"),select:d.hasClass("selected"),activate:d.hasClass("active"),focus:d.hasClass("focused"),noLink:d.hasClass("noLink")};if(d.attr("title"))e.tooltip=d.attr("title");if(d.attr("id"))e.key=d.attr("id");if(d.attr("data"))if(f=g.trim(d.attr("data"))){if(f.charAt(0)!="{")f="{"+f+"}";try{g.extend(e,eval("("+f+")"))}catch(h){throw"Error parsing node data: "+h+"\ndata:\n'"+
f+"'";}}e=a.addChild(e);d=d.find(">ul:first");d.length&&c._createFromTag(e,d)})},_checkConsistency:function(){},_setDndStatus:function(a,b,c,d,e){a=a?g(a.span):null;b=g(b.span);if(!this.$dndMarker){this.$dndMarker=g("<div id='dynatree-drop-marker'></div>").hide().prependTo("body");logMsg("Creating marker: %o",this.$dndMarker)}if(d==="after"||d==="before"||d==="over"){var f=b.position();switch(d){case "before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-before");
f.top-=8;break;case "after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over");this.$dndMarker.addClass("dynatree-drop-after");f.top+=8;break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before");this.$dndMarker.addClass("dynatree-drop-over");b.addClass("dynatree-drop-target");f.left+=8}this.$dndMarker.css({left:f.left+"px",top:f.top+"px"}).show()}else{b.removeClass("dynatree-drop-target");this.$dndMarker.hide()}d==="after"?b.addClass("dynatree-drop-after"):
b.removeClass("dynatree-drop-after");d==="before"?b.addClass("dynatree-drop-before"):b.removeClass("dynatree-drop-before");if(e===true){a&&a.addClass("dynatree-drop-accept");b.addClass("dynatree-drop-accept");c.addClass("dynatree-drop-accept")}else{a&&a.removeClass("dynatree-drop-accept");b.removeClass("dynatree-drop-accept");c.removeClass("dynatree-drop-accept")}if(e===false){a&&a.addClass("dynatree-drop-reject");b.addClass("dynatree-drop-reject");c.addClass("dynatree-drop-reject")}else{a&&a.removeClass("dynatree-drop-reject");
b.removeClass("dynatree-drop-reject");c.removeClass("dynatree-drop-reject")}},_onDragEvent:function(a,b,c,d,e,f){a!=="over"&&this.logDebug("tree._onDragEvent(%s, %o, %o) - %o",a,b,c,this);var h=this.options.dnd,i=null,j=g(b.span);switch(a){case "helper":c=g("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append(g(d.target).closest("a").clone());c.data("dtSourceNode",b);logMsg("helper.sourceNode=%o",c.data("dtSourceNode"));i=c;break;case "start":if(b.isStatusNode())i=
false;else if(h.onDragStart)i=h.onDragStart(b);if(i===false){this.logDebug("tree.onDragStart() cancelled");e.helper.trigger("mouseup");e.helper.hide()}else j.addClass("dynatree-drag-source");break;case "enter":i=h.onDragEnter?h.onDragEnter(b,c):null;i={over:i!==false&&(i===true||i==="over"||g.inArray("over",i)>=0),before:i!==false&&(i===true||i==="before"||g.inArray("before",i)>=0),after:i!==false&&(i===true||i==="after"||g.inArray("after",i)>=0)};e.helper.data("enterResponse",i);this.logDebug("helper.enterResponse: %o",
i);break;case "over":f=e.helper.data("enterResponse");a=null;if(f===false)break;else if(typeof f==="string")a=f;else{var l=j.position();d={x:d.clientX-l.left,y:d.clientY-l.top};j={x:d.x/j.width(),y:d.y/j.height()};if(f.after&&j.y>0.75)a="after";else if(!f.over&&f.after&&j.y>0.5)a="after";else if(f.before&&j.y<=0.25)a="before";else if(!f.over&&f.before&&j.y<=0.5)a="before";else if(f.over)a="over";if(h.preventVoidMoves)if(b===c){logMsg("  drop over source node prevented");a=null}else if(a==="before"&&
c&&b===c.getNextSibling()){logMsg("  drop after source node prevented");a=null}else if(a==="after"&&c&&b===c.getPrevSibling()){logMsg("  drop before source node prevented");a=null}else if(a==="over"&&c&&c.parent===b&&c.isLastSibling()){logMsg("  drop last child over own parent prevented");a=null}logMsg("hitMode: %s - %s - %s",a,b.parent===c,b.isLastSibling());e.helper.data("hitMode",a)}a==="over"&&h.autoExpandMS&&b.hasChildren()!==false&&!b.bExpanded&&b.scheduleAction("expand",h.autoExpandMS);if(a&&
h.onDragOver)i=h.onDragOver(b,c,a);this._setDndStatus(c,b,e.helper,a,i!==false);break;case "drop":(a=e.helper.data("hitMode"))&&h.onDrop&&h.onDrop(b,c,a,e,f);break;case "leave":b.scheduleAction("cancel");e.helper.data("enterResponse",null);e.helper.data("hitMode",null);this._setDndStatus(c,b,e.helper,"out",undefined);h.onDragLeave&&h.onDragLeave(b,c);break;case "stop":j.removeClass("dynatree-drag-source");h.onDragStop&&h.onDragStop(b);break;default:throw"Unsupported drag event: "+a;}return i},cancelDrag:function(){var a=
g.ui.ddmanager.current;a&&a.cancel()},lastentry:undefined};g.widget("ui.dynatree",{_init:function(){if(parseFloat(g.ui.version)<1.8){_log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher.");return this._create()}_log("debug","ui.dynatree._init() was called; no current default functionality.")},_create:function(){logMsg("Dynatree._create(): version='%s', debugLevel=%o.",q.version,this.options.debugLevel);this.options.event+=".dynatree";this.element.get(0);
this.tree=new q(this);this.tree._load();this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function a(e){e=e=g.event.fix(e||window.event);var f=k(e.target);return f?f._onFocus(e):false}var b=this.element,c=this.options;this.unbind();var d="click.dynatree dblclick.dynatree";if(c.keyboard)d+=" keypress.dynatree keydown.dynatree";b.bind(d,function(e){var f=k(e.target);if(!f)return true;var h=f.tree.phase;f.tree.phase="userEvent";try{f.tree.logDebug("bind(%o): dtnode: %o",e,f);switch(e.type){case "click":return c.onClick&&
c.onClick(f,e)===false?false:f._onClick(e);case "dblclick":return c.onDblClick&&c.onDblClick(f,e)===false?false:f._onDblClick(e);case "keydown":return c.onKeydown&&c.onKeydown(f,e)===false?false:f._onKeydown(e);case "keypress":return c.onKeypress&&c.onKeypress(f,e)===false?false:f._onKeypress(e)}}catch(i){f.tree.logWarning("bind(%o): dtnode: %o, error: %o",e,f,i)}finally{f.tree.phase=h}});b=this.tree.divTree;if(b.addEventListener){b.addEventListener("focus",a,true);b.addEventListener("blur",a,true)}else b.onfocusin=
b.onfocusout=a},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind();g.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind();g.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:undefined});if(parseFloat(g.ui.version)<1.8)g.ui.dynatree.getter=
"getTree getRoot getActiveNode getSelectedNodes";g.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:true,keyboard:true,persist:false,autoCollapse:false,clickFolderMode:3,activeVisible:true,checkbox:false,selectMode:2,fx:null,noLink:false,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,
onSelect:null,onExpand:null,onLazyRead:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1E3,preventVoidMoves:true,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:false,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:false,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",
vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",
lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:2,lastentry:undefined};if(parseFloat(g.ui.version)<1.8)g.ui.dynatree.defaults=g.ui.dynatree.prototype.options;g.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:false,isLazy:false,tooltip:null,icon:null,addClass:null,noLink:false,activate:false,focus:false,expand:false,select:false,hideCheckbox:false,unselectable:false,children:null,lastentry:undefined};var r=false,s=function(){if(!r){g.ui.plugin.add("draggable",
"connectToDynatree",{start:function(a,b){var c=g(this).data("draggable"),d=b.helper.data("dtSourceNode")||null;logMsg("draggable-connectToDynatree.start, %s",d);logMsg("  this: %o",this);logMsg("  event: %o",a);logMsg("  draggable: %o",c);logMsg("  ui: %o",b);if(d){c.offset.click.top=-2;c.offset.click.left=+16;logMsg("  draggable.offset.click FIXED: %s/%s",c.offset.click.left,c.offset.click.top);return d.tree._onDragEvent("start",d,null,a,b,c)}},drag:function(a,b){var c=g(this).data("draggable"),
d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null,f=k(a.target);logMsg("getDtNodeFromElement(%o): %s",a.target,f);if(a.target&&!f)if(g(a.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0){logMsg("Drag event over helper: ignored.");return}b.helper.data("dtTargetNode",f);e&&e!==f&&e.tree._onDragEvent("leave",e,d,a,b,c);if(f)if(f.tree.options.dnd.onDrop)f===e?f.tree._onDragEvent("over",f,d,a,b,c):f.tree._onDragEvent("enter",f,d,a,b,c)},stop:function(a,
b){var c=g(this).data("draggable"),d=b.helper.data("dtSourceNode")||null,e=b.helper.data("dtTargetNode")||null;logMsg("draggable-connectToDynatree.stop: targetNode(from event): %s, dtTargetNode: %s",e,b.helper.data("dtTargetNode"));logMsg("draggable-connectToDynatree.stop, %s",d);var f=a.type;logMsg("  type: %o, downEvent: %o, upEvent: %o",f,c._mouseDownEvent,a);logMsg("  targetNode: %o",e);(f=f=="mouseup"&&a.which==1)||logMsg("Drag was cancelled");if(e){f&&e.tree._onDragEvent("drop",e,d,a,b,c);e.tree._onDragEvent("leave",
e,d,a,b,c)}d&&d.tree._onDragEvent("stop",d,null,a,b,c)}});r=true}}})(jQuery);
