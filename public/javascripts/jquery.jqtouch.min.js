(function(a){a.jQTouch=function(e){a.support.WebKitCSSMatrix=(typeof WebKitCSSMatrix=="object");a.support.touch=(typeof Touch=="object");a.support.WebKitAnimationEvent=(typeof WebKitTransitionEvent=="object");var u,q=a("head"),k=[],i=0,m={},j,w,d,b=RegExp(" Mobile/").test(navigator.userAgent),f=true,v=0,E=[],s={},D=a.jQTouch.prototype.extensions,F=["slide","flip","slideup","swap","cube","pop","dissolve","fade","back"],o=[],h="";x(e);function x(J){var M={addGlossToIcon:true,backSelector:".back, .cancel, .goback",cacheGetRequests:true,cubeSelector:".cube",dissolveSelector:".dissolve",fadeSelector:".fade",fixedViewport:true,flipSelector:".flip",formSelector:"form",fullScreen:true,fullScreenClass:"fullscreen",icon:null,touchSelector:"a, .touch",popSelector:".pop",preloadImages:false,slideSelector:"#jqt > * > ul li a, .slide",slideupSelector:".slideup",startupScreen:null,statusBar:"default",submitSelector:".submit",swapSelector:".swap",useAnimations:true,useFastTouch:true};m=a.extend({},M,J);if(m.preloadImages){for(var K=m.preloadImages.length-1;K>=0;K--){(new Image()).src=m.preloadImages[K]}}if(m.icon){var L=(m.addGlossToIcon)?"":"-precomposed";h+='<link rel="apple-touch-icon'+L+'" href="'+m.icon+'" />'}if(m.startupScreen){h+='<link rel="apple-touch-startup-image" href="'+m.startupScreen+'" />'}if(m.fixedViewport){h+='<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0;"/>'}if(m.fullScreen){h+='<meta name="apple-mobile-web-app-capable" content="yes" />';if(m.statusBar){h+='<meta name="apple-mobile-web-app-status-bar-style" content="'+m.statusBar+'" />'}}if(h){q.prepend(h)}a(document).ready(function(){for(var P in D){var Q=D[P];if(a.isFunction(Q)){a.extend(s,Q(s))}}for(var P in F){var O=F[P];var N=m[O+"Selector"];if(typeof(N)=="string"){z({name:O,selector:N})}}E.push("input");E.push(m.touchSelector);E.push(m.backSelector);E.push(m.submitSelector);a(E.join(", ")).css("-webkit-touch-callout","none");a(m.backSelector).tap(n);a(m.submitSelector).tap(r);u=a("#jqt");if(m.fullScreenClass&&window.navigator.standalone==true){u.addClass(m.fullScreenClass+" "+m.statusBar)}u.bind("touchstart",H).bind("orientationchange",B).trigger("orientationchange").submit(p);if(m.useFastTouch&&a.support.touch){u.click(function(S){var R=a(S.target);if(R.attr("nodeName")!=="A"&&R.attr("nodeName")!=="AREA"&&R.attr("nodeName")!=="INPUT"){R=R.closest("a, area")}if(R.isExternalLink()){return true}else{return false}});u.mousedown(function(R){var S=(new Date()).getTime()-v;if(S<200){return false}})}if(a("#jqt > .current").length==0){w=a("#jqt > *:first")}else{w=a("#jqt > .current:first");a("#jqt > .current").removeClass("current")}a(w).addClass("current");location.hash="#"+a(w).attr("id");t(w);scrollTo(0,0);A()})}function I(N){if(k.length<=1){window.history.go(-2)}var M=Math.min(parseInt(N||1,10),k.length-1),L=k[0];if(isNaN(M)&&typeof(N)==="string"&&N!="#"){for(var J=1,K=k.length;J<K;J++){if("#"+k[J].id===N){M=J;break}}}if(isNaN(M)||M<1){M=1}if(k.length>1){k.splice(0,M);g(L.page,k[0].page,L.animation,L.reverse===false)}else{location.hash="#"+L.id}return s}function G(L,M,J){var N=k[0].page;if(typeof(M)==="string"){for(var K=o.length-1;K>=0;K--){if(o[K].name===M){M=o[K];break}}}if(typeof(L)==="string"){nextPage=a(L);if(nextPage.length<1){y(L,{animation:M});return}else{L=nextPage}}if(g(N,L,M,J)){t(L,M,J);return s}else{console.error("Could not animate pages.");return false}}function l(){return d}function n(O){var K=a(O.target);if(K.attr("nodeName")!=="A"&&K.attr("nodeName")!=="AREA"){K=K.closest("a, area")}var N=K.attr("target"),M=K.attr("hash"),L=null;if(f==false||!K.length){console.warn("Not able to tap element.");return false}if(K.isExternalLink()){K.removeClass("active");return true}for(var J=o.length-1;J>=0;J--){if(K.is(o[J].selector)){L=o[J];break}}if(N=="_webapp"){window.location=K.attr("href")}else{if(K.is(m.backSelector)){I(M)}else{if(K.attr("href")=="#"){K.unselect();return true}else{if(M&&M!="#"){K.addClass("active");G(a(M).data("referrer",K),L,a(this).hasClass("reverse"))}else{K.addClass("loading active");y(K.attr("href"),{animation:L,callback:function(){K.removeClass("loading");setTimeout(a.fn.unselect,250,K)},$referrer:K})}}}}return false}function t(M,L,K){var J=M.attr("id");k.unshift({page:M,animation:L,reverse:K||false,id:J})}function g(N,L,M,K){if(L.length===0){a.fn.unselect();console.error("Target element is missing.");return false}if(L.hasClass("current")){a.fn.unselect();console.error("Target element is the current page.");return false}a(":focus").blur();N.css("top",-window.pageYOffset);L.css("top",0);scrollTo(0,0);var O=function J(Q){if(M){L.removeClass("in "+M.name);N.removeClass("current out "+M.name);if(K){L.toggleClass("reverse");N.toggleClass("reverse")}}else{N.removeClass("current")}L.trigger("pageAnimationEnd",{direction:"in"});N.trigger("pageAnimationEnd",{direction:"out"});clearInterval(j);w=L;location.hash="#"+w.attr("id");A();var P=L.data("referrer");if(P){P.unselect()}v=(new Date()).getTime();f=true};N.trigger("pageAnimationStart",{direction:"out"});L.trigger("pageAnimationStart",{direction:"in"});if(a.support.WebKitAnimationEvent&&M&&m.useAnimations){L.one("webkitAnimationEnd",O);f=false;if(K){L.toggleClass("reverse");N.toggleClass("reverse")}L.addClass(M.name+" in current");N.addClass(M.name+" out")}else{L.addClass("current");O()}return true}function C(){var J=w.attr("id");if(location.hash!="#"+J){clearInterval(j);I(location.hash)}else{if(location.hash==""){location.hash="#"+J}}}function A(){j=setInterval(C,100)}function c(J,K){var L=null;a(J).each(function(N,O){var M=a(this);if(!M.attr("id")){M.attr("id","page-"+(++i))}u.trigger("pageInserted",{page:M.appendTo(u)});if(M.hasClass("current")||!L){L=M}});if(L!==null){G(L,K);return L}else{return false}}function y(J,K){var M={data:null,method:"GET",animation:null,callback:null,$referrer:null};var L=a.extend({},M,K);if(J!="#"){a.ajax({url:J,data:L.data,type:L.method,success:function(N,P){var O=c(N,L.animation);if(O){if(L.method=="GET"&&m.cacheGetRequests===true&&L.$referrer){L.$referrer.attr("href","#"+O.attr("id"))}if(L.callback){L.callback(true)}}},error:function(N){if(L.$referrer){L.$referrer.unselect()}if(L.callback){L.callback(false)}}})}else{if(L.$referrer){L.$referrer.unselect()}}}function p(K,L){var J=(typeof(K)==="string")?a(K).eq(0):(K.target?a(K.target):a(K));if(J.length&&J.is(m.formSelector)){y(J.attr("action"),{data:J.serialize(),method:J.attr("method")||"POST",animation:o[0]||null,callback:L});return false}return true}function r(L){var K=a(this).closest("form");if(K.length){var J=a.Event("submit");J.preventDefault();K.trigger(J);return false}return true}function z(J){if(typeof(J.selector)=="string"&&typeof(J.name)=="string"){o.push(J);a(J.selector).tap(n);E.push(J.selector)}}function B(){d=Math.abs(window.orientation)==90?"landscape":"profile";u.removeClass("profile landscape").addClass(d).trigger("turn",{orientation:d})}function H(R){var V=a(R.target);if(!a(R.target).is(E.join(", "))){var S=a(R.target).closest("a, area");if(S.length&&S.is(E.join(", "))){V=S}else{return}}if(R){var J=null,P=event.changedTouches[0].clientX,O=event.changedTouches[0].clientY,K=(new Date).getTime(),N=0,L=0,Q=0;V.bind("touchmove",M).bind("touchend",T);J=setTimeout(function(){V.makeActive()},100)}function M(Y){U();var X=Math.abs(N);var W=Math.abs(L);if(X>W&&(X>35)&&Q<1000){V.trigger("swipe",{direction:(N<0)?"left":"right",deltaX:N,deltaY:L}).unbind("touchmove",M).unbind("touchend",T)}else{if(W>1){V.removeClass("active")}}clearTimeout(J)}function T(){U();if(L===0&&N===0){V.makeActive();V.trigger("tap")}else{V.removeClass("active")}V.unbind("touchmove",M).unbind("touchend",T);clearTimeout(J)}function U(){var W=event.changedTouches[0]||null;N=W.pageX-P;L=W.pageY-O;Q=(new Date).getTime()-K}}a.fn.unselect=function(J){if(J){J.removeClass("active")}else{a(".active").removeClass("active")}};a.fn.makeActive=function(){return a(this).addClass("active")};a.fn.swipe=function(J){if(a.isFunction(J)){return a(this).bind("swipe",J)}else{return a(this).trigger("swipe")}};a.fn.tap=function(K){if(a.isFunction(K)){var J=(m.useFastTouch&&a.support.touch)?"tap":"click";return a(this).live(J,K)}else{return a(this).trigger("tap")}};a.fn.isExternalLink=function(){var J=a(this);return(J.attr("target")=="_blank"||J.attr("rel")=="external"||J.is('input[type="checkbox"], input[type="radio"], a[href^="http://maps.google.com:"], a[href^="mailto:"], a[href^="tel:"], a[href^="javascript:"], a[href*="youtube.com/v"], a[href*="youtube.com/watch"]'))};s={getOrientation:l,goBack:I,goTo:G,addAnimation:z,submitForm:p};return s};a.jQTouch.prototype.extensions=[];a.jQTouch.addExtension=function(b){a.jQTouch.prototype.extensions.push(b)}})(jQuery);(function(a){a.fn.transition=function(c,b){return this.each(function(){var e=a(this);var h={speed:"300ms",callback:null,ease:"ease-in-out"};var g=a.extend({},h,b);if(g.speed===0){e.css(c);window.setTimeout(g.callback,0)}else{if(a.browser.safari){var f=[];for(var d in c){f.push(d)}e.css({webkitTransitionProperty:f.join(", "),webkitTransitionDuration:g.speed,webkitTransitionTimingFunction:g.ease});if(g.callback){e.one("webkitTransitionEnd",g.callback)}setTimeout(function(i){i.css(c)},0,e)}else{e.animate(c,g.speed,g.callback)}}})}})(jQuery);var SpinningWheel={cellHeight:44,friction:0.003,slotData:[],handleEvent:function(a){if(a.type=="touchstart"){this.lockScreen(a);if(a.currentTarget.id=="sw-cancel"||a.currentTarget.id=="sw-done"){this.tapDown(a)}else{if(a.currentTarget.id=="sw-frame"){this.scrollStart(a)}}}else{if(a.type=="touchmove"){this.lockScreen(a);if(a.currentTarget.id=="sw-cancel"||a.currentTarget.id=="sw-done"){this.tapCancel(a)}else{if(a.currentTarget.id=="sw-frame"){this.scrollMove(a)}}}else{if(a.type=="touchend"){if(a.currentTarget.id=="sw-cancel"||a.currentTarget.id=="sw-done"){this.tapUp(a)}else{if(a.currentTarget.id=="sw-frame"){this.scrollEnd(a)}}}else{if(a.type=="webkitTransitionEnd"){if(a.target.id=="sw-wrapper"){}else{this.backWithinBoundaries(a)}}else{if(a.type=="orientationchange"){this.onOrientationChange(a)}else{if(a.type=="scroll"){this.onScroll(a)}}}}}}},onOrientationChange:function(a){window.scrollTo(0,0);this.swWrapper.style.top=window.innerHeight+window.pageYOffset+"px";this.calculateSlotsWidth()},onScroll:function(a){this.swWrapper.style.top=window.innerHeight+window.pageYOffset+"px"},lockScreen:function(a){a.preventDefault();a.stopPropagation()},reset:function(){this.slotEl=[];this.activeSlot=null;this.swWrapper=undefined;this.swSlotWrapper=undefined;this.swSlots=undefined;this.swFrame=undefined},calculateSlotsWidth:function(){var b=this.swSlots.getElementsByTagName("div");for(var a=0;a<b.length;a+=1){this.slotEl[a].slotWidth=b[a].offsetWidth}},create:function(){var d,a,b,c,e;this.reset();e=document.createElement("div");e.id="sw-wrapper";e.style.top=window.innerHeight+window.pageYOffset+"px";e.style.webkitTransitionProperty="-webkit-transform";e.innerHTML='<div id="sw-slots-wrapper"><div id="sw-slots"></div></div><div id="sw-frame"></div>';document.body.appendChild(e);this.swWrapper=e;this.swSlotWrapper=document.getElementById("sw-slots-wrapper");this.swSlots=document.getElementById("sw-slots");this.swFrame=document.getElementById("sw-frame");for(a=0;a<this.slotData.length;a+=1){c=document.createElement("ul");b="";for(d in this.slotData[a].values){b+="<li>"+this.slotData[a].values[d]+"</li>"}c.innerHTML=b;e=document.createElement("div");e.className=this.slotData[a].style;e.appendChild(c);this.swSlots.appendChild(e);c.slotPosition=a;c.slotYPosition=0;c.slotWidth=0;c.slotMaxScroll=this.swSlotWrapper.clientHeight-c.clientHeight-86;c.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)";this.slotEl.push(c);if(this.slotData[a].defaultValue){this.scrollToValue(a,this.slotData[a].defaultValue)}}this.calculateSlotsWidth();document.addEventListener("touchmove",this,false);window.addEventListener("orientationchange",this,true);window.addEventListener("scroll",this,true);document.getElementById("sw-done").addEventListener("touchstart",this,false);this.swFrame.addEventListener("touchstart",this,false)},open:function(){this.create();this.swWrapper.style.webkitTransitionTimingFunction="ease-out";this.swWrapper.style.webkitTransitionDuration="400ms";this.swWrapper.style.webkitTransform="translate3d(0, -210px, 0)"},destroy:function(){this.swWrapper.removeEventListener("webkitTransitionEnd",this,false);this.swFrame.removeEventListener("touchstart",this,false);document.getElementById("sw-done").removeEventListener("touchstart",this,false);document.removeEventListener("touchmove",this,false);window.removeEventListener("orientationchange",this,true);window.removeEventListener("scroll",this,true);this.slotData=[];this.cancelAction=function(){return false};this.cancelDone=function(){return true};this.reset();document.body.removeChild(document.getElementById("sw-wrapper"))},close:function(){this.swWrapper.style.webkitTransitionTimingFunction="ease-in";this.swWrapper.style.webkitTransitionDuration="400ms";this.swWrapper.style.webkitTransform="translate3d(0, 0, 0)";this.swWrapper.addEventListener("webkitTransitionEnd",this,false)},addSlot:function(b,d,a){if(!d){d=""}d=d.split(" ");for(var c=0;c<d.length;c+=1){d[c]="sw-"+d[c]}d=d.join(" ");var e={values:b,style:d,defaultValue:a};this.slotData.push(e)},getSelectedValues:function(){var c,f,d,a,e=[],b=[];for(d in this.slotEl){this.slotEl[d].removeEventListener("webkitTransitionEnd",this,false);this.slotEl[d].style.webkitTransitionDuration="0";if(this.slotEl[d].slotYPosition>0){this.setPosition(d,0)}else{if(this.slotEl[d].slotYPosition<this.slotEl[d].slotMaxScroll){this.setPosition(d,this.slotEl[d].slotMaxScroll)}}c=-Math.round(this.slotEl[d].slotYPosition/this.cellHeight);f=0;for(a in this.slotData[d].values){if(f==c){e.push(a);b.push(this.slotData[d].values[a]);break}f+=1}}return{keys:e,values:b}},setPosition:function(b,a){this.slotEl[b].slotYPosition=a;this.slotEl[b].style.webkitTransform="translate3d(0, "+a+"px, 0)"},scrollStart:function(c){var d=c.targetTouches[0].clientX-this.swSlots.offsetLeft;var f=0;for(var a=0;a<this.slotEl.length;a+=1){f+=this.slotEl[a].slotWidth;if(d<f){this.activeSlot=a;break}}if(this.slotData[this.activeSlot].style.match("readonly")){this.swFrame.removeEventListener("touchmove",this,false);this.swFrame.removeEventListener("touchend",this,false);return false}this.slotEl[this.activeSlot].removeEventListener("webkitTransitionEnd",this,false);this.slotEl[this.activeSlot].style.webkitTransitionDuration="0";var b=window.getComputedStyle(this.slotEl[this.activeSlot]).webkitTransform;b=new WebKitCSSMatrix(b).m42;if(b!=this.slotEl[this.activeSlot].slotYPosition){this.setPosition(this.activeSlot,b)}this.startY=c.targetTouches[0].clientY;this.scrollStartY=this.slotEl[this.activeSlot].slotYPosition;this.scrollStartTime=c.timeStamp;this.swFrame.addEventListener("touchmove",this,false);this.swFrame.addEventListener("touchend",this,false);return true},scrollMove:function(b){var a=b.targetTouches[0].clientY-this.startY;if(this.slotEl[this.activeSlot].slotYPosition>0||this.slotEl[this.activeSlot].slotYPosition<this.slotEl[this.activeSlot].slotMaxScroll){a/=2}this.setPosition(this.activeSlot,this.slotEl[this.activeSlot].slotYPosition+a);this.startY=b.targetTouches[0].clientY;if(b.timeStamp-this.scrollStartTime>80){this.scrollStartY=this.slotEl[this.activeSlot].slotYPosition;this.scrollStartTime=b.timeStamp}},scrollEnd:function(f){this.swFrame.removeEventListener("touchmove",this,false);this.swFrame.removeEventListener("touchend",this,false);if(this.slotEl[this.activeSlot].slotYPosition>0||this.slotEl[this.activeSlot].slotYPosition<this.slotEl[this.activeSlot].slotMaxScroll){this.scrollTo(this.activeSlot,this.slotEl[this.activeSlot].slotYPosition>0?0:this.slotEl[this.activeSlot].slotMaxScroll);return false}var b=this.slotEl[this.activeSlot].slotYPosition-this.scrollStartY;if(b<this.cellHeight/1.5&&b>-this.cellHeight/1.5){if(this.slotEl[this.activeSlot].slotYPosition%this.cellHeight){this.scrollTo(this.activeSlot,Math.round(this.slotEl[this.activeSlot].slotYPosition/this.cellHeight)*this.cellHeight,"100ms")}return false}var g=f.timeStamp-this.scrollStartTime;var a=(2*b/g)/this.friction;var d=(this.friction/2)*(a*a);if(a<0){a=-a;d=-d}var c=this.slotEl[this.activeSlot].slotYPosition+d;if(c>0){c/=2;a/=3;if(c>this.swSlotWrapper.clientHeight/4){c=this.swSlotWrapper.clientHeight/4}}else{if(c<this.slotEl[this.activeSlot].slotMaxScroll){c=(c-this.slotEl[this.activeSlot].slotMaxScroll)/2+this.slotEl[this.activeSlot].slotMaxScroll;a/=3;if(c<this.slotEl[this.activeSlot].slotMaxScroll-this.swSlotWrapper.clientHeight/4){c=this.slotEl[this.activeSlot].slotMaxScroll-this.swSlotWrapper.clientHeight/4}}else{c=Math.round(c/this.cellHeight)*this.cellHeight}}this.scrollTo(this.activeSlot,Math.round(c),Math.round(a)+"ms");return true},scrollTo:function(c,a,b){this.slotEl[c].style.webkitTransitionDuration=b?b:"100ms";this.setPosition(c,a?a:0);if(this.slotEl[c].slotYPosition>0||this.slotEl[c].slotYPosition<this.slotEl[c].slotMaxScroll){this.slotEl[c].addEventListener("webkitTransitionEnd",this,false)}},scrollToValue:function(e,d){var c,b,a;this.slotEl[e].removeEventListener("webkitTransitionEnd",this,false);this.slotEl[e].style.webkitTransitionDuration="0";b=0;for(a in this.slotData[e].values){if(a==d){c=b*this.cellHeight;this.setPosition(e,c);break}b-=1}},backWithinBoundaries:function(a){a.target.removeEventListener("webkitTransitionEnd",this,false);this.scrollTo(a.target.slotPosition,a.target.slotYPosition>0?0:a.target.slotMaxScroll,"150ms");return false},tapDown:function(a){a.currentTarget.addEventListener("touchmove",this,false);a.currentTarget.addEventListener("touchend",this,false);a.currentTarget.className="sw-pressed"},tapCancel:function(a){a.currentTarget.removeEventListener("touchmove",this,false);a.currentTarget.removeEventListener("touchend",this,false);a.currentTarget.className=""},tapUp:function(a){this.tapCancel(a);if(a.currentTarget.id=="sw-cancel"){this.cancelAction()}else{this.doneAction()}},setCancelAction:function(a){this.cancelAction=a},setDoneAction:function(a){this.doneAction=a},cancelAction:function(){return false},cancelDone:function(){return true}};(function(){var o=this;var j=Array();var p=Array();function f(u,v){for(var t in v){u[t]=v[t]}}function h(v,t,u){v.style.width=t.toString()+"px";v.style.height=u.toString()+"px"}function s(u,t,v){u.style.left=Math.round(t).toString()+"px";u.style.top=Math.round(v).toString()+"px"}TrayController=function(){return this};TrayController.prototype.init=function(t){this.currentX=0;this.elem=t};TrayController.prototype.touchstart=function(t){this.startX=t.touches[0].pageX-this.currentX;this.touchMoved=false;window.addEventListener("touchmove",this,true);window.addEventListener("touchend",this,true);this.elem.style.webkitTransitionDuration="0s"};TrayController.prototype.touchmove=function(t){this.touchMoved=true;this.lastX=this.currentX;this.lastMoveTime=new Date();this.currentX=event.touches[0].pageX-this.startX;this.delegate.update(this.currentX)};TrayController.prototype.touchend=function(u){window.removeEventListener("touchmove",this,true);window.removeEventListener("touchend",this,true);this.elem.style.webkitTransitionDuration="0.4s";if(this.touchMoved){var v=this.currentX-this.lastX;var t=(new Date())-this.lastMoveTime+1;this.currentX=this.currentX+v*200/t;this.delegate.updateTouchEnd(this)}else{this.delegate.clicked(this.currentX)}};TrayController.prototype.handleEvent=function(t){this[t.type](t);t.preventDefault()};const e=150;const n=e/2;const d=70;const a=n/2;const g=e;const b=e/3;const k="rotateY("+(-d)+"deg)";const c="rotateY("+d+"deg)";const i="translateZ("+g+"px)";FlowDelegate=function(){this.cells=new Array();this.transforms=new Array()};FlowDelegate.prototype.init=function(t){this.elem=t};FlowDelegate.prototype.updateTouchEnd=function(t){this.lastFocus=undefined;var u=this.getFocusedCell(t.currentX);t.currentX=-u*n;this.update(t.currentX)};FlowDelegate.prototype.clicked=function(u){var v=-Math.round(u/n);var t=this.cells[v];galleryCell=v};FlowDelegate.prototype.getFocusedCell=function(t){var u=-Math.round(t/n);return Math.min(Math.max(u,0),this.cells.length-1)};FlowDelegate.prototype.transformForCell=function(u,w,y){var t=(w*n);var v=t+y;if((v<a)&&(v>=-a)){return i+" translateX("+t+"px)"}else{if(v>0){return"translateX("+(t+b)+"px) "+k}else{return"translateX("+(t-b)+"px) "+c}}};FlowDelegate.prototype.setTransformForCell=function(t,v,u){if(this.transforms[v]!=u){t.style.webkitTransform=u;this.transforms[v]=u}};FlowDelegate.prototype.update=function(u){this.elem.style.webkitTransform="translateX("+(u)+"px)";for(var v in this.cells){var t=this.cells[v];this.setTransformForCell(t,v,this.transformForCell(t,v,u));v+=1}};var l=new TrayController();var q=new FlowDelegate();o.zflow=function(v,u){var x=document.querySelector(u);l.init(x);q.init(x);l.delegate=q;var t={top:Math.round(-e*0.65)+"px",left:Math.round(-e/2)+"px",width:e+"px",height:Math.round(e*1.5)+"px",opacity:0,};var w=0;function y(){var z=document.createElement("div");var D=document.createElement("img");var B=document.createElement("canvas");var C=document.createElement("a");var A=document.createElement("caption");z.className="cell";z.appendChild(C);C.appendChild(D);z.appendChild(B);z.appendChild(A);D.src=v[w];j[w]=v[w];C.href="show_image.php?fName="+v[w];C.className="slide-right";o.afnc=function(){var E=D.width;var H=D.height;var F=Math.min(e/H,e/E);E*=F;H*=F;h(D,E,H);f(z.style,t);s(D,(e-E)/2,e-H);s(B,(e-E)/2,e);s(A,(e-E)/2,e+10);m(D,E,H,B);var G=v[w].match(/(.*)[\/\\]([^\/\\]+)\.\w+$/)[2];G=G.replace(/_/g," ");G=G.replace(/(^|\s)([a-z])/g,function(I,K,J){return K+J.toUpperCase()});p[w]=G;r(A,E,w);q.setTransformForCell(z,q.cells.length,q.transformForCell(z,q.cells.length,l.currentX));q.cells.push(z);x.appendChild(z);z.style.opacity=1;if(w<(v.length-1)){w++;y()}else{window.setTimeout(function(){window.scrollTo(0,0)},100);galleryInit=1}};D.addEventListener("load",afnc,true)}y();x.addEventListener("touchstart",l,false)};o.zflowCleanup=function(t){var u=document.querySelector(t);if(u){if(u.childNodes.length>0){q.transforms.length=0;q.cells.length=0;while(u.hasChildNodes()){var v=u.childNodes[0].childNodes[0].childNodes[0];v.removeEventListener("load",afnc,true);u.removeChild(u.childNodes[0])}var w=document.getElementById("gallery");if(w){w.parentNode.removeChild(w);galleryInit=0;galleryCell=0}}}};o.zflowGetImageSource=function(t,u){var v=document.querySelector(t);var w="";if(v){if(v.childNodes.length>0){while(v.hasChildNodes()){w=v.childNodes[0].childNodes[0].childNodes[u].src}}}return w};function r(u,t,v){u.width=t;u.innerHTML=p[v]}function m(x,u,y,v){v.width=u;v.height=y/2;var t=v.getContext("2d");t.save();t.translate(0,y-1);t.scale(1,-1);t.drawImage(x,0,0,u,y);t.restore();t.globalCompositeOperation="destination-out";var w=t.createLinearGradient(0,0,0,y/2);w.addColorStop(1,"rgba(255, 255, 255, 1.0)");w.addColorStop(0,"rgba(255, 255, 255, 0.5)");t.fillStyle=w;t.fillRect(0,0,u,y/2)}})();var now=new Date();function getCalendar(b){var c=b.getDate();var a=b.getMonth()+1;var e=b.getFullYear();$.get("month.php",{month:a,year:e},function(d){$("#ical").empty();$(d).appendTo("#ical");setBindings();setToday();setSelectedAndLoadEvents(b)})}function getEvents(b){var c=b.getDate();var a=b.getMonth()+1;var e=b.getFullYear();$.get("events.htm",{day:c,month:a,year:e},function(d){$("#ical .events").empty();$(d).appendTo("#ical .events")})}function getNoEvents(){var a="<li class='no-event'>No Events</li>";$("#ical .events").empty();$(a).appendTo("#ical .events")}function setBindings(){$("#ical td").bind("click",function(){var b=$(this).attr("class");var a=getClickedDate($(this));RemoveSelectedCell();setToday();if(b.indexOf("date_has_event")!=-1||b.indexOf("today_date_has_event")!=-1){$(this).attr("class","selected_date_has_event");getEvents(a)}if(b==""||b.indexOf("today")!=-1){$(this).attr("class","selected");getNoEvents()}if(b.indexOf("prevmonth")!=-1||b.indexOf("nextmonth")!=-1){getCalendar(a)}});$("#ical .bottom-bar .bottom-bar-today").bind("click",function(){getCalendar(now)});$("#ical .goto-prevmonth").bind("click",function(){loadPrevNextMonth(-1)});$("#ical .goto-nextmonth").bind("click",function(){loadPrevNextMonth(1)})}function RemoveSelectedCell(){$("#ical .selected_date_has_event").removeClass("selected_date_has_event");$("#ical .selected").removeClass("selected")}function getClickedDate(b){var c=$(b).find("input").val();var a=getDateFromHiddenField(c);return a}function loadPrevNextMonth(c){var b=$("#ical .selected").text();if(b==""){b=$("#ical .selected_date_has_event").text()}var a=parseInt($("#ical > #month").val());var e=$("#ical > #year").val();var d=new Date(e,a-1,b);if(c==1){d.nextMonth()}else{d.prevMonth()}getCalendar(d)}function setToday(){$("#ical :hidden").each(function(a){var b=getDateFromHiddenField($(this).val());if(!isNaN(b)){if(now.getDate()==b.getDate()&&now.getMonth()==b.getMonth()&&now.getFullYear()==b.getFullYear()){var c=$(this).closest("td");if($(c).attr("class")=="date_has_event"){$(c).attr("class","today_date_has_event")}else{$(c).attr("class","today")}}}})}function getDateFromHiddenField(c){var b=c.split("-");return new Date(b[2],b[1]-1,b[0])}function setSelectedAndLoadEvents(a){RemoveSelectedCell();$("#ical td").each(function(c){var d=$(this).attr("class");var b=getClickedDate($(this));if((d!="prevmonth"&&d!="nextmonth")&&a.getDate()==b.getDate()&&a.getMonth()==b.getMonth()&&a.getFullYear()==b.getFullYear()){if(d=="date_has_event"){$(this).attr("class","selected_date_has_event");getEvents(a)}else{$(this).attr("class","selected");getNoEvents()}}});setToday()}function trim(b,a){return ltrim(rtrim(b,a),a)}function ltrim(b,a){a=a||"\\s";return b.replace(new RegExp("^["+a+"]+","g"),"")}function rtrim(b,a){a=a||"\\s";return b.replace(new RegExp("["+a+"]+$","g"),"")}function dateAddExtention(c,a){var b=new String();c=c.toLowerCase();if(isNaN(a)){throw"The second parameter must be a number. \n You passed: "+a;return false}a=new Number(a);switch(c.toLowerCase()){case"yyyy":this.setFullYear(this.getFullYear()+a);break;case"q":this.setMonth(this.getMonth()+(a*3));break;case"m":this.setMonth(this.getMonth()+a);break;case"y":case"d":case"w":this.setDate(this.getDate()+a);break;case"ww":this.setDate(this.getDate()+(a*7));break;case"h":this.setHours(this.getHours()+a);break;case"n":this.setMinutes(this.getMinutes()+a);break;case"s":this.setSeconds(this.getSeconds()+a);break;case"ms":this.setMilliseconds(this.getMilliseconds()+a);break;default:throw"The first parameter must be a string from this list: \nyyyy, q, m, y, d, w, ww, h, n, s, or ms. You passed: "+c;return false}return this}Date.prototype.dateAdd=dateAddExtention;function prevMonth(){var a=this.getMonth();this.setMonth(a-1);if(this.getMonth()!=a-1&&(this.getMonth()!=11||(a==11&&this.getDate()==1))){this.setDate(0)}}function nextMonth(){var a=this.getMonth();this.setMonth(a+1);if(this.getMonth()!=a+1&&this.getMonth()!=0){this.setDate(0)}}Date.prototype.nextMonth=nextMonth;Date.prototype.prevMonth=prevMonth;(function(a){if(a.jQTouch){a.jQTouch.addExtension(function b(e){var d=".toolbar h1";a(function(){a("#jqt").bind("pageAnimationStart",function(i,g){if(g.direction==="in"){var f=a(d,a(i.target));var h=a(i.target).data("referrer");if(f.length&&h){f.html(h.text())}}})});function c(f){d=f}return{setTitleSelector:c}})}})(jQuery);(function(b){if(b.jQTouch){b.jQTouch.addExtension(function a(c){b.fn.makeFloaty=function(d){var f={align:"top",spacing:20,time:".3s"};var e=b.extend({},f,d);e.align=(e.align=="top")?"top":"bottom";return this.each(function(){var g=b(this);g.css({"-webkit-transition":"top "+e.time+" ease-in-out",display:"block","min-height":"0 !important"}).data("settings",e);b(document).bind("scroll",function(){if(g.data("floatyVisible")===true){g.scrollFloaty()}});g.scrollFloaty()})};b.fn.scrollFloaty=function(){return this.each(function(){var d=b(this);var f=d.data("settings");var e=b("html").attr("clientHeight");var g=window.pageYOffset+((f.align=="top")?f.spacing:e-f.spacing-d.get(0).offsetHeight);d.css("top",g).data("floatyVisible",true)})};b.fn.hideFloaty=function(){return this.each(function(){var d=b(this);var e=d.get(0).offsetHeight;d.css("top",-e-10).data("floatyVisible",false)})};b.fn.toggleFloaty=function(){return this.each(function(){var d=b(this);if(d.data("floatyVisible")===true){d.hideFloaty()}else{d.scrollFloaty()}})}})}})(jQuery);(function(b){if(b.jQTouch){b.jQTouch.addExtension(function a(){var i,f,h;function d(){return navigator.geolocation}function g(j){if(d()){h=j;navigator.geolocation.getCurrentPosition(c);return true}else{console.log("Device not capable of geo-location.");j(false);return false}}function c(j){i=j.coords.latitude;f=j.coords.longitude;if(h){h(e())}}function e(){if(i&&f){return{latitude:i,longitude:f}}else{console.log("No location available. Try calling updateLocation() first.");return false}}return{updateLocation:g,getLocation:e}})}})(jQuery);(function(b){if(b.jQTouch){b.jQTouch.addExtension(function a(){var c=[];c[0]="uncached";c[1]="idle";c[2]="checking";c[3]="downloading";c[4]="updateready";c[5]="obsolete";var d=window.applicationCache;window.addEventListener("cached",f,false);window.addEventListener("checking",f,false);window.addEventListener("downloading",f,false);window.addEventListener("error",f,false);window.addEventListener("noupdate",f,false);window.addEventListener("obsolete",f,false);window.addEventListener("progress",f,false);window.addEventListener("updateready",f,false);function f(m){var j,i,k,l;j=(h())?"yes":"no";i=c[d.status];k=m.type;l="online: "+j;l+=", event: "+k;l+=", status: "+i;if(k=="error"&&navigator.onLine){l+=" There was an unknown error, check your Cache Manifest."}console.log(l)}function h(){return navigator.onLine}if(!b("html").attr("manifest")){console.log("No Cache Manifest listed on the <html> tag.")}window.addEventListener("updateready",function(i){if(c[d.status]!="idle"){d.swapCache();console.log("Swapped/updated the Cache Manifest.")}},false);function e(){d.update()}function g(){setInterval(function(){d.update()},10000)}return{isOnline:h,checkForUpdates:e,autoCheckForUpdates:g}})}})(jQuery);(function(b){b.fn.scalable=function(c){return this.each(function(){new a(this,c)})};if(b.jQTouch){b.jQTouch.addExtension(function(d){function c(g,f){f.page.find(".scalable").scalable()}b(document.body).bind("pageInserted",c);b(function(){b("body > *").each(function(){c({},{page:b(this)})})});return{}});function a(d,c){var e=this;this.numberOfTouches=2;this.element=d;this.scale(1);this.refresh();this.scaleLessThanOne=false;d.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)";d.addEventListener("touchstart",this,false);d.addEventListener("touchmove",this,false);d.addEventListener("touchend",this,false);window.addEventListener("unload",function(){d.removeEventListener("touchstart",e,false);d.removeEventListener("touchmove",e,false);d.removeEventListener("touchend",e,false);this.removeEventListener("unload",arguments.callee,false)},false);if(c){b.extend(this,c)}}a.prototype={handleEvent:function(c){switch(c.type){case"touchstart":return this.onTouchStart(c);break;case"touchmove":return this.onTouchMove(c);break;case"touchend":return this.onTouchEnd(c);break}},scale:function(c){if(c!==undefined){this._scale=c;this.element.style.webkitTransform="scale("+c+")";return}return this._scale},refresh:function(){this.element.style.webkitTransitionDuration="0"},onTouchStart:function(c){if(c.targetTouches.length!=this.numberOfTouches){return}this.refresh();this.moved=false;this.startDistance=Math.sqrt(Math.pow((c.targetTouches[1].clientX-c.targetTouches[0].clientX),2)+Math.pow((c.targetTouches[1].clientX-c.targetTouches[0].clientX),2));return false},onTouchMove:function(f){if(f.targetTouches.length!=this.numberOfTouches){return}f.preventDefault();this.moved=true;this.refresh();var c=Math.sqrt(Math.pow((f.targetTouches[1].clientX-f.targetTouches[0].clientX),2)+Math.pow((f.targetTouches[1].clientY-f.targetTouches[0].clientY),2)),g=c-this.startDistance,d=(g/this.startDistance)/2;this.scale(this.scale()+(this.scale()*d));this.startDistance=c;return false},onTouchEnd:function(d){var c,f;if(!this.moved){c=d.target;if(c.nodeType==3){c=c.parentNode}f=document.createEvent("MouseEvents");f.initEvent("click",true,true);c.dispatchEvent(f);return}d.preventDefault();d.stopPropagation();if(!this.scaleLessThanOne&&this.scale()<1){this.element.style.webkitTransitionDuration="200ms";this.scale(1)}return false},scaleTo:function(c,d){this.element.style.webkitTransitionDuration=d?d:"300ms";this.scale(c?c:0)}}}})(jQuery);(function(a){a.fn.scrollVertically=function(d){return this.each(function(){new c(this,d)})};a.fn.scrollHorizontally=function(d){return this.each(function(){new b(this,d)})};if(a.jQTouch){a.jQTouch.addExtension(function(e){function d(i,h){var f=h.page.find(".horizontal-scroll > table"),g=h.page.find(".vertical-scroll > div");f.scrollHorizontally({acceleration:Number(f.attr("scrollspeed")||0.009)});g.scrollVertically({acceleration:Number(g.attr("scrollspeed")||0.009)})}a(document.body).bind("pageInserted",d);a(function(){a("body > *").each(function(){d({},{page:a(this)})})});return{}});function c(e,d){var f=this;this.numberOfTouches=1;this.element=e;this.position(0);this.refresh();e.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)";this.acceleration=0.009;e.addEventListener("touchstart",this,false);window.addEventListener("unload",function(){e.removeEventListener("touchstart",f,false);window.removeEventListener("unload",arguments.callee,false)},false);if(d){a.extend(this,d)}}c.prototype={handleEvent:function(d){switch(d.type){case"touchstart":this.onTouchStart(d);break;case"touchmove":this.onTouchMove(d);break;case"touchend":this.onTouchEnd(d);break;case"webkitTransitionEnd":this.onTransitionEnd(d);break}},position:function(d){if(d!==undefined){this._position=d;this.element.style.webkitTransform="translate3d(0, "+d+"px, 0)";return}return this._position},refresh:function(){this.element.style.webkitTransitionDuration="0";if(this.element.offsetHeight<this.element.parentNode.clientHeight){this.maxScroll=0}else{this.maxScroll=this.element.parentNode.clientHeight-this.element.offsetHeight}},onTouchStart:function(f){if(f.targetTouches.length!=this.numberOfTouches){return}f.preventDefault();this.refresh();var d=window.getComputedStyle(this.element).webkitTransform;d=new WebKitCSSMatrix(d).m42;if(d!=this.position()){this.position(d)}this.startY=f.targetTouches[0].clientY;this.scrollStartY=this.position();this.scrollStartTime=f.timeStamp;this.moved=false;this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false)},onTouchMove:function(f){if(f.targetTouches.length!=this.numberOfTouches){return}f.preventDefault();var d=f.targetTouches[0].clientY-this.startY;if(this.position()>0||this.position()<this.maxScroll){d/=2}this.position(this.position()+d);this.startY=f.targetTouches[0].clientY;this.moved=true;if(f.timeStamp-this.scrollStartTime>100){this.scrollStartY=this.position();this.scrollStartTime=f.timeStamp}},onTouchEnd:function(j){this.element.removeEventListener("touchmove",this,false);this.element.removeEventListener("touchend",this,false);j.preventDefault();var g,i,k,f,l,d,h;if(this.position()>0||this.position()<this.maxScroll){this.scrollTo(this.position()>0?0:this.maxScroll);return}if(!this.moved){i=j.target;if(i.nodeType==3){i=i.parentNode}k=document.createEvent("MouseEvents");k.initEvent("click",true,true);i.dispatchEvent(k);return false}f=this.position()-this.scrollStartY;l=j.timeStamp-this.scrollStartTime;d=(2*f/l)/this.acceleration;h=(this.acceleration/2)*(d*d);if(d<0){d=-d;h=-h}g=this.position()+h;if(g>this.element.parentNode.clientHeight/2){g=this.element.parentNode.clientHeight/2}else{if(g>0){g/=1.5}else{if(g<this.maxScroll-this.element.parentNode.clientHeight/2){g=this.maxScroll-this.element.parentNode.clientHeight/2}else{if(g<this.maxScroll){g=(g-this.maxScroll)/1.5+this.maxScroll}else{d*=6}}}}this.scrollTo(g,Math.round(d)+"ms")},onTransitionEnd:function(){this.element.removeEventListener("webkitTransitionEnd",this,false);this.scrollTo(this.position()>0?0:this.maxScroll)},scrollTo:function(d,e){this.element.style.webkitTransitionDuration=e?e:"300ms";this.position(d?d:0);if(this.position()>0||this.position()<this.maxScroll){this.element.addEventListener("webkitTransitionEnd",this,false)}}};function b(e,d){var f=this;this.numberOfTouches=1;this.element=e;this.position(0);this.refresh();e.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)";this.acceleration=0.009;e.addEventListener("touchstart",this,false);window.addEventListener("unload",function(){e.removeEventListener("touchstart",f,false);window.removeEventListener("unload",arguments.callee,false)},false);if(d){a.extend(this,d)}}b.prototype={handleEvent:function(d){switch(d.type){case"touchstart":this.onTouchStart(d);break;case"touchmove":this.onTouchMove(d);break;case"touchend":this.onTouchEnd(d);break;case"webkitTransitionEnd":this.onTransitionEnd(d);break}},position:function(d){if(d!==undefined){this._position=d;this.element.style.webkitTransform="translateX("+d+"px)";return}return this._position},refresh:function(){this.element.style.webkitTransitionDuration="0";if(this.element.offsetWidth<this.element.parentNode.clientWidth){this.maxScroll=0}else{this.maxScroll=this.element.parentNode.clientWidth-this.element.offsetWidth}},onTouchStart:function(d){if(d.targetTouches.length!=this.numberOfTouches){return}d.preventDefault();this.refresh();this.startX=d.targetTouches[0].clientX;this.scrollStartX=this.position();this.scrollStartTime=d.timeStamp;this.moved=false;this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false)},onTouchMove:function(f){if(f.targetTouches.length!=this.numberOfTouches){return}f.preventDefault();var d=f.targetTouches[0].clientX-this.startX;if(this.position()>0||this.position()<this.maxScroll){d/=2}this.position(this.position()+d);this.startX=f.targetTouches[0].clientX;this.moved=true;if(f.timeStamp-this.scrollStartTime>100){this.scrollStartX=this.position();this.scrollStartTime=f.timeStamp}},onTouchEnd:function(j){this.element.removeEventListener("touchmove",this,false);this.element.removeEventListener("touchend",this,false);j.preventDefault();var g,i,k,f,l,d,h;if(!this.moved){i=j.target;if(i.nodeType==3){i=i.parentNode}k=document.createEvent("MouseEvents");k.initEvent("click",true,true);i.dispatchEvent(k);return false}f=this.position()-this.scrollStartX;l=j.timeStamp-this.scrollStartTime;d=(2*f/l)/this.acceleration;h=(this.acceleration/2)*(d*d);if(d<0){d=-d;h=-h}g=this.position()+h;if(g>this.element.parentNode.clientWidth/2){g=this.element.parentNode.clientWidth/2}else{if(g<this.maxScroll-this.element.parentNode.clientWidth/2){g=this.maxScroll-this.element.parentNode.clientWidth/2}else{if(g<this.maxScroll){g=(g-this.maxScroll)/1.5+this.maxScroll}else{d*=6}}}this.scrollTo(g,Math.round(d)+"ms")},onTransitionEnd:function(){this.element.removeEventListener("webkitTransitionEnd",this,false);this.scrollTo(this.position()>0?0:this.maxScroll)},scrollTo:function(d,e){this.element.style.webkitTransitionDuration=e?e:"300ms";this.position(d?d:0);if(this.position()>0||this.position()<this.maxScroll){this.element.addEventListener("webkitTransitionEnd",this,false)}}}}})(jQuery);(function(c){c.fn.slideVertically=function(d){return this.each(function(){new b(this,d)})};c.fn.slideHorizontally=function(d){return this.each(function(){new a(this,d)})};if(c.jQTouch){c.jQTouch.addExtension(function(e){function d(i,h){var f=h.page.find(".horizontal-slide > table"),g=h.page.find(".vertical-slide > div");f.slideHorizontally({acceleration:Number(f.attr("slidespeed")||500)||null});g.slideVertically({acceleration:Number(g.attr("slidespeed")||500)})}c(document.body).bind("pageInserted",d);c(function(){c("body > *").each(function(){d({},{page:c(this)})})});return{}});function b(e,d){var f=this;this.numberOfTouches=1;this.acceleration=500;this.element=e;this.position(0);this.refresh();e.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)";e.addEventListener("touchstart",this,false);window.addEventListener("unload",function(){e.removeEventListener("touchstart",f,false);window.removeEventListener("unload",arguments.callee,false)},false);if(d){c.extend(this,d)}}b.prototype={handleEvent:function(d){switch(d.type){case"touchstart":this.onTouchStart(d);break;case"touchmove":this.onTouchMove(d);break;case"touchend":this.onTouchEnd(d);break;case"webkitTransitionEnd":this.onTransitionEnd(d);break}},position:function(d){if(d!==undefined){this._position=d;this.element.style.webkitTransform="translate3d(0, "+d+"px, 0)";return}return this._position},refresh:function(){this.element.style.webkitTransitionDuration="0";if(this.element.offsetHeight<this.element.parentNode.clientHeight){this.maxSlide=0}else{this.maxSlide=this.element.parentNode.clientHeight-this.element.offsetHeight}},onTouchStart:function(f){if(f.targetTouches.length!=this.numberOfTouches){return}f.preventDefault();this.refresh();var d=window.getComputedStyle(this.element).webkitTransform;d=new WebKitCSSMatrix(d).m42;if(d!=this.position()){this.position(d)}this.startY=f.targetTouches[0].clientY;this.slideStartY=this.position();this.slideStartTime=f.timeStamp;this.moved=false;this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false);return false},onTouchMove:function(f){if(f.targetTouches.length!=this.numberOfTouches){return}f.preventDefault();var d=f.targetTouches[0].clientY-this.startY;if(this.position()>0||this.position()<this.maxSlide){d/=2}this.position(this.position()+d);this.startY=f.targetTouches[0].clientY;this.moved=true;return false},onTouchEnd:function(h){h.preventDefault();this.element.removeEventListener("touchmove",this,false);this.element.removeEventListener("touchend",this,false);var d=this.position(),g,i,f;if(d>0||d<this.maxSlide){this.slideTo(d>0?0:this.maxSlide);return}if(!this.moved){g=h.target;if(g.nodeType==3){g=g.parentNode}i=document.createEvent("MouseEvents");i.initEvent("click",true,true);g.dispatchEvent(i);return false}if(d>0){f=0}else{if(d<this.maxSlide){f=this.maxSlide}else{f=this.snapTo(this.position(),this.slideStartY<this.position())}}this.slideTo(f,this.acceleration+"ms");return},onTransitionEnd:function(){this.element.removeEventListener("webkitTransitionEnd",this,false);this.slideTo(this.position()>0?0:this.maxSlide)},slideTo:function(d,e){this.element.style.webkitTransitionDuration=e?e:this.acceleration+"ms";this.position(d?d:0);if(this.position()>0||this.position()<this.maxSlide){this.element.addEventListener("webkitTransitionEnd",this,false)}},snapTo:function(f,e){if(f!=0){var j=-f,h=this.element.querySelectorAll(".vertical-slide-snapto"),g=0,d=h.length;for(d=h.length;g<d;++g){if(h[g].offsetTop>=j){return !e?-h[g].offsetTop:-(h[g-1]||h[0]||{offsetTop:f}).offsetTop}}}return f}};function a(e,d){var f=this;this.numberOfTouches=1;this.acceleration=500;this.element=e;this.position(0);this.refresh();e.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)";this.acceleration=null;e.addEventListener("touchstart",this,false);window.addEventListener("unload",function(){e.removeEventListener("touchstart",f,false);window.removeEventListener("unload",arguments.callee,false)},false);if(d){c.extend(this,d)}}a.prototype={handleEvent:function(d){switch(d.type){case"touchstart":this.onTouchStart(d);break;case"touchmove":this.onTouchMove(d);break;case"touchend":this.onTouchEnd(d);break;case"webkitTransitionEnd":this.onTransitionEnd(d);break}},position:function(d){if(d!==undefined){this._position=d;this.element.style.webkitTransform="translateX("+d+"px)";return}return this._position},refresh:function(){this.element.style.webkitTransitionDuration="0";if(this.element.offsetWidth<this.element.parentNode.clientWidth){this.maxSlide=0}else{this.maxSlide=this.element.parentNode.clientWidth-this.element.offsetWidth}},onTouchStart:function(d){if(d.targetTouches.length!=this.numberOfTouches){return false}d.preventDefault();this.refresh();this.slideStartX=this.startX=d.targetTouches[0].clientX;this.slideStartTime=d.timeStamp;this.moved=false;this.element.addEventListener("touchmove",this,false);this.element.addEventListener("touchend",this,false);return false},onTouchMove:function(f){if(f.targetTouches.length!=this.numberOfTouches){return false}f.preventDefault();var d=f.targetTouches[0].clientX-this.startX;this.position(this.position()+d);this.startX=f.targetTouches[0].clientX;this.moved=true;return false},onTouchEnd:function(k){k.preventDefault();var h,j,l,i,g,d,f;this.element.removeEventListener("touchmove",this,false);this.element.removeEventListener("touchend",this,false);if(this.position()>0||this.position()<this.maxSlide){this.slideTo(this.position()>0?0:this.maxSlide);return}if(!this.moved){j=k.target;if(j.nodeType==3){j=j.parentNode}l=document.createEvent("MouseEvents");l.initEvent("click",true,true);j.dispatchEvent(l);return false}h=this.position()+((this.startX-this.slideStartX)/2);if(h>0){h=0}else{if(h<this.maxSlide){h=this.maxSlide}else{h=this.snapTo(this.position(),h>this.position())}}this.slideTo(h,this.acceleration+"ms");return false},onTransitionEnd:function(){this.element.removeEventListener("webkitTransitionEnd",this,false);this.slideTo(this.position()>0?0:this.maxScroll)},slideTo:function(d,e){this.element.style.webkitTransitionDuration=e?e:this.acceleration+"ms";this.position(d?d:0);if(this.position()>0||this.position()<this.maxSlide){this.element.addEventListener("webkitTransitionEnd",this,false)}},snapTo:function(f,e){if(f!=0){var j=-f,g=0,h=this.element.querySelectorAll(".horizontal-slide-snapto"),d=h.length;for(;g<d;++g){if(h[g].offsetLeft>=j){return !e?-h[g].offsetLeft:-(h[g-1]||h[0]||{offsetLeft:f}).offsetLeft}}}return f}}}})(jQuery);