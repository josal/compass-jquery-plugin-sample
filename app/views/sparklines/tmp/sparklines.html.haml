!!! Strict
%html{"xml:lang" => "en", :xmlns => "http://www.w3.org/1999/xhtml"}
  %head
    %title jQuery Sparklines
    %meta{:content => "text/html; charset=UTF-8", "http-equiv" => "content-type"}
      %meta{:content => "Plugin for jQuery to generate sparkline charts directly in the web browser", :name => "Description"}
        :css
          body { font-family: helvetica, arial, san-serif; background-color: #257; text-align: center; font-size: 0.9em; line-height: 1.2em}
          p, li { color: #333; }
          h1 { border-bottom: 1px solid #44a; margin-bottom: 30px; line-height: 1.0em}
          h1 span { border-bottom: 8px solid #44a; margin-bottom: 8px; }
          h2 { border-bottom: 1px solid #44a; line-height: 1.0em}
          h2 span { border-bottom: 4px solid #44a; margin-bottom: 8px; padding: 0px; }
          h3 { margin-top: 30px; }
          ul { margin-left: 0px; padding-left: 2em; }
          #container { background-color: white; width: 720px;  margin-left: auto; margin-right: auto; text-align: left; padding: 30px; border: 5px solid #146;}
          pre { border: 1px dotted gray; background-color: #def; margin-left: 20px; padding: 4px; margin-right: 20px; overflow: auto}
          #markets { float: right; width: 250px; height: 60px;  font-size: 0.7em; text-align: right; background-color: white;}
          #markets p { margin: 0px 0px 4px 0px; }
          .coptions { display: none; }
          #customize { padding: 15px; margin-left: 0px; border: 1px dashed black; font-size: 0.9em; background-color: #fafaff; position: relative}
          #customize h3 { text-align:  center; margin-top: 0px; margin-bottom: 5px; font-size: 1.0em}
          #customize ul { margin: 0px; list-style: none; }
          #customize li { padding-bottom: 5px; }
          #customize input { font-size: 0.9em; }
          #examples1 { float: right; width: 300px; font-size: 0.8em; background-color: #f8f8ff; margin: 5px 0px 15px 10px; padding: 0px; }
          #examples div { padding: 8px; }
          #examples { position: relative; margin-top: 50px; }
          #ex2 { float: right; width: 50%; position: relative}
          .typetitle { text-decoration: underline; }
          .section { display: none; clear: both}
          #footer { text-align: center; font-size: 0.7em; color: #777; clear: both; margin-top: 100px; }
          .docdemo { float: right; position: relative; line-height: 1.3em}
          #doctoc { float: right; position: relative; border-left: 1px solid gray; font-size: 0.9em; line-height: 1.2em}
          #doctoc a { text-decoration: none }
          #doctoc a:hover { text-decoration: underline }
          #customresult { text-align: center; font-size: 1.2em}
          #newversion { float: right; margin: 5px 0px 15px 15px; font-size: 0.8em; font-weight: bold; color: black; border: 1px solid red; background: #ff9; padding: 4px; text-align: center; }
              
            %link{:href => "Sparklines-Dateien/ui_003.css", :rel => "stylesheet"}
          %link{:href => "Sparklines-Dateien/ui.css", :rel => "stylesheet"}
            %link{:href => "Sparklines-Dateien/ui_002.css", :rel => "stylesheet"}
              /
                AHA!  I *knew* you wouldn't be able to resist taking a look here to see how things are setup!
                Good idea - There's a few comments below, but hopefully things are readable as is.
                
                First thing we do is load in jQuery and the jquery.sparkline plugin
                (incidently you'd normally put all this at the END of your page to speed loading times)
              %script{:src => "Sparklines-Dateien/jquery-1.4.2.min.js", :type => "text/javascript"}
              %script{:src => "Sparklines-Dateien/ui_002.js", :type => "text/javascript"}
              %script{:src => "Sparklines-Dateien/ui.js", :type => "text/javascript"}
              %script{:src => "Sparklines-Dateien/jquery.sparkline.min.js", :type => "text/javascript"}
              /
                Then we use jQuery's $(...) handler to define some javascript to run once the page is loaded
              :javascript
    /*  */
    var mdraw = 0;
    $(function() {
        var tabs = $('#tabs').tabs();
        $('.ui-tabs-nav').bind('tabsshow', function() { $.sparkline_display_visible(); });

        /** Draw all the example charts on the page **/

        // Bar + line composite charts
        $('#compositebar').sparkline('html', { type: 'bar', barColor: '#aaf' });
        $('#compositebar').sparkline([4,1,5,7,9,9,8,7,6,6,4,7,8,4,3,2,2,5,6,7], { composite: true, fillColor: false, lineColor: 'red' });

        // Line charts taking their values from the tag
        $('.line').sparkline();

        // Larger line charts for the docs
        $('.largeline').sparkline('html', { type: 'line', height: '2.5em', width: '4em' });

        // Customized line chart
        $('#linecustom').sparkline('html', {height: '1.5em', width: '8em', lineColor: '#f00', fillColor: '#ffa', minSpotColor: false, maxSpotColor: false, spotColor: '#77f', spotRadius: 3});

        // Bar charts using inline values
        $('.bar').sparkline('html', {type: 'bar'});

        // Tri-state charts using inline values
        $('.tristate').sparkline('html', {type: 'tristate'});
        $('.tristatecols').sparkline('html', {type: 'tristate', colorMap: {'-2': '#fa7', '2': '#44f'} });

        // Composite line charts, the second using values supplied via javascript
        $('#compositeline').sparkline('html', { fillColor: false });
        $('#compositeline').sparkline([4,1,5,7,9,9,8,7,6,6,4,7,8,4,3,2,2,5,6,7], { composite: true, fillColor: false, lineColor: 'red' });

        // Line charts with normal range marker
        $('#normalline').sparkline('html', { fillColor: false, normalRangeMin: -1, normalRangeMax: 8 });
        $('#normalExample').sparkline('html', { fillColor: false, normalRangeMin: 80, normalRangeMax: 95, normalRangeColor: '#4f4' });

        // Discrete charts
        $('.discrete1').sparkline('html', { type: 'discrete', lineColor: 'blue', xwidth: 18 });
        $('#discrete2').sparkline('html', { type: 'discrete', lineColor: 'blue', thresholdColor: 'red', thresholdValue: 4 });

        // Bullet charts
        $('.bullet').sparkline('html', { type: 'bullet' });

        // Pie charts
        $('.pie').sparkline('html', { type: 'pie', height: '1.0em' });

        // Box plots
        $('.boxplot').sparkline('html', { type: 'box'});
        $('.boxplotraw').sparkline([ 1, 3, 5, 8, 10, 15, 18 ], {type:'box', raw: true, showOutliers:true, target: 6});

         /** Handle updating the "try it" graphs form in the examples section **/
        function updateLine() {
            var type = $('#charttype').val();
            var negbarcolor = '';
            var barwidth = '';
            var barspacing = '';
            switch(type) {
                case 'bar':
                    negbarcolor = $('#barnegbarcolor').val();
                    barwidth = parseInt($('#barbarwidth').val());
                    barspacing = parseInt($('#barbarspacing').val());
                    break;
                case 'tristate':
                    negbarcolor = $('#trinegbarcolor').val();
                    barwidth = parseInt($('#tribarwidth').val());
                    barspacing = parseInt($('#tribarspacing').val());
                    break;
            }
            $('#dynamicline').sparkline($('#'+type+'vals').val().split(','),  {
                type: type,
                height: $('#chartheight').val(),
                width: $('#chartwidth').val(),
                lineColor: $('#linecol').val(),
                fillColor: $('#fillcol').val(),
                spotColor: $('#spotcol').val(),
                spotRadius: parseInt($('#spotsize').val()),
                lineWidth: parseFloat($('#linewidth').val()),
                barColor: $('#barcolor').val(),
                posBarColor: $('#posbarcolor').val(),
                negBarColor: negbarcolor,
                zeroBarColor: $('#zerobarcolor').val(),
                zeroColor: $('#zerocolor').val() || undefined,
                barWidth: barwidth,
                barSpacing: barspacing,
                lineHeight: parseInt($('#lineheight').val()) || undefined,
                thresholdValue: parseInt($('#thresholdvalue').val()),
                thresholdColor: $('#thresholdcolor').val(),
                targetColor: $('#targetcolor').val(),
                performanceColor: $('#performancecolor').val(),
                rangeColors: $('#rangecolors').val().split(','),
                targetWidth: parseInt($('#targetwidth').val()),
                sliceColors: $('#slicecolors').val().split(','),
                boxLineColor: $('#boxlinecol').val(),
                boxFillColor: $('#boxfillcol').val(),
                whiskerColor: $('#whiskercol').val(),
                outlierLineColor: $('#outlierlinecol').val(),
                outlierFillColor: $('#outlierfillcol').val(),
                medianColor: $('#mediancol').val(),
                showOutliers: $('#showoutliers').attr('checked'),
                outlierIQR: parseFloat($('#outlieriqr').val()),
                target: parseFloat($('#boxtarget').val())
                });
            $('.coptions').hide();
            $('.'+type+'options').show();
            if ($.browser.msie) 
                $('input').hide().show(); // workaround weird ie layout glitch
            return false;
        }
        updateLine();
        $('#dynform input').change(updateLine);
        $('#dynform select').change(updateLine);
        $('#dynform').submit(updateLine);

        /** 
        ** Draw the little mouse speed animated graph
        ** This just attaches a handler to the mousemove event to see
        ** (roughly) how far the mouse has moved
        ** and then updates the display a couple of times a second via
        ** setTimeout()
        **/
        var mrefreshinterval = 500; // update display every 500ms
        var lastmousex=-1; 
        var lastmousey=-1;
        var lastmousetime;
        var mousetravel = 0;
        var mpoints = [];
        var mpoints_max = 30;
        $('body').mousemove(function(e) {
            var mousex = e.pageX;
            var mousey = e.pageY;
            if (lastmousex > -1)
                mousetravel += Math.max( Math.abs(mousex-lastmousex), Math.abs(mousey-lastmousey) );
            lastmousex = mousex;
            lastmousey = mousey;
        });
        mdraw = function() {
            var md = new Date();
            var timenow = md.getTime();
            if (lastmousetime && lastmousetime!=timenow) {
                var pps = Math.round(mousetravel / (timenow - lastmousetime) * 1000);
                mpoints.push(pps);
                if (mpoints.length > mpoints_max)
                    mpoints.splice(0,1);
                mousetravel = 0;
                $('#mousespeed').sparkline(mpoints, { width: mpoints.length*2 });
            }
            lastmousetime = timenow;
            mtimer = setTimeout(mdraw, mrefreshinterval);
        }
        var mtimer = setTimeout(mdraw, mrefreshinterval); // We could use setInterval instead, but I prefer to do it this way
        $.sparkline_display_visible(); 
        $('#simplelink')[0].target = '_blank';

    });
    function switchtab(tabnum) {
        $('#tabs').tabs('select', tabnum);
    }
    /*  */
      %body
    #container
      %h1
        %span jQuery Sparklines
      %ul#tabs.ui-tabs-nav.ui-helper-reset.ui-helper-clearfix.ui-widget-header.ui-corner-all
        #examples
          %a{:name => "examples"}
          %h2
            %span Examples
          #ex2
            %p
              Pie charts
              %span.pie
                %canvas{:height => "14", :style => "display: inline-block; width: 14px; height: 14px; vertical-align: top;", :width => "14"}
              %span.pie
                %canvas{:height => "14", :style => "display: inline-block; width: 14px; height: 14px; vertical-align: top;", :width => "14"}
              %span.pie
                %canvas{:height => "14", :style => "display: inline-block; width: 14px; height: 14px; vertical-align: top;", :width => "14"}
            %p
              Bullet charts
              %br
                %span.bullet
                  %canvas{:height => "16", :style => "display: inline-block; width: 58px; height: 16px; vertical-align: top;", :width => "58"}
                %br
                  %span.bullet
                    %canvas{:height => "16", :style => "display: inline-block; width: 58px; height: 16px; vertical-align: top;", :width => "58"}
                  %br
                    %span.bullet
                      %canvas{:height => "16", :style => "display: inline-block; width: 58px; height: 16px; vertical-align: top;", :width => "58"}
                    %br
            %form#dynform{:action => "#"}
              #customize{:class => ".customize"}
                %h3 Try It Out
                %p#customresult
                  %span#dynamicline
                    %canvas{:height => "18", :style => "display: inline-block; width: 36px; height: 18px; vertical-align: top;", :width => "36"}
                %ul
                  %li
                    Chart type:
                    %select#charttype{:name => "charttype"}
                      %option{:selected => "selected", :value => "line"} Line
                      %option{:value => "bar"} Bar
                      %option{:value => "tristate"} Tristate
                      %option{:value => "discrete"} Discrete
                      %option{:value => "bullet"} Bullet
                      %option{:value => "pie"} Pie
                      %option{:value => "box"} Box Plot
                  %li.coptions.lineoptions{:style => "display: list-item;"}
                    Values:
                    %input#linevals{:size => "20", :type => "text", :value => "5,6,7,9,9,5,3,2,2,4,6,7"}/
                  %li.coptions.baroptions{:style => "display: none;"}
                    Values:
                    %input#barvals{:size => "20", :type => "text", :value => "5,6,7,2,0,-4,-2,4"}/
                  %li.coptions.bulletoptions{:style => "display: none;"}
                    Values:
                    %input#bulletvals{:size => "20", :type => "text", :value => "10,12,12,9,7"}/
                  %li.coptions.tristateoptions{:style => "display: none;"}
                    Values:
                    %input#tristatevals{:size => "20", :type => "text", :value => "-1,1,1,2,0,-1,-2,1,1"}/
                  %li.coptions.discreteoptions{:style => "display: none;"}
                    Values:
                    %input#discretevals{:size => "20", :type => "text", :value => "5,6,7,9,9,5,3,2,2,4,6,7"}/
                  %li.coptions.pieoptions{:style => "display: none;"}
                    Values:
                    %input#pievals{:size => "20", :type => "text", :value => "1,2,4"}/
                  %li.coptions.boxoptions{:style => "display: none;"}
                    Values:
                    %input#boxvals{:size => "20", :type => "text", :value => "4,27,34,52,54,59,61,68,78,82,85,87,91,93,100"}/
                  %li
                    Height:
                    %input#chartheight{:size => "10", :type => "text", :value => "auto"} (css units; try 50px for pixels
                  %li
                    Width:
                    %input#chartwidth{:size => "10", :type => "text", :value => "auto"} or 2em for double the font size)
                %ul.coptions.lineoptions.discreteoptions{:style => "display: block;"}
                  %li
                    Line Colour:
                    %input#linecol{:size => "10", :type => "text", :value => "#00f"}/
                  %li
                    Fill Colour:
                    %input#fillcol{:size => "10", :type => "text", :value => "#cdf"}/
                %ul.coptions.lineoptions{:style => "display: block;"}
                  %li
                    Spot Colour:
                    %input#spotcol{:size => "10", :type => "text", :value => "#f80"}/
                  %li
                    Spot Size:
                    %input#spotsize{:size => "10", :type => "text", :value => "2"} (in pixels)
                  %li
                    Line Width:
                    %input#linewidth{:size => "10", :type => "text", :value => "1"} (in pixels)
                %ul.coptions.baroptions{:style => "display: none;"}
                  %li
                    Bar Color:
                    %input#barcol{:size => "10", :type => "text", :value => "#00f"}/
                  %li
                    Negative Bar Color:
                    %input#barnegbarcol{:size => "10", :type => "text", :value => "#f44"}/
                  %li
                    Zero Color:
                    %input#zerocol{:size => "10", :type => "text"}/
                  %li
                    Bar Width:
                    %input#barbarwidth{:size => "10", :type => "text", :value => "4"}/
                  %li
                    Bar Spacing:
                    %input#barbarspacing{:size => "10", :type => "text", :value => "1"}/
                %ul.coptions.tristateoptions{:style => "display: none;"}
                  %li
                    Positive Bar Color:
                    %input#posbarcol{:size => "10", :type => "text", :value => "#6f6"}/
                  %li
                    Negative Bar Color:
                    %input#trinegbarcol{:size => "10", :type => "text", :value => "#f44"}/
                  %li
                    Zero Bar Color:
                    %input#zerobarcol{:size => "10", :type => "text", :value => "#999"}/
                  %li
                    Bar Width:
                    %input#tribarwidth{:size => "10", :type => "text", :value => "4"}/
                  %li
                    Bar Spacing:
                    %input#tribarspacing{:size => "10", :type => "text", :value => "1"}/
                %ul.coptions.discreteoptions{:style => "display: none;"}
                  %li
                    Line Height:
                    %input#lineheight{:size => "10", :type => "text"}/
                  %li
                    Threshold Value:
                    %input#thresholdvalue{:size => "10", :type => "text", :value => "5"}/
                  %li
                    Threshold Color:
                    %input#thresholdcolor{:size => "10", :type => "text", :value => "#f55"}/
                %ul.coptions.bulletoptions{:style => "display: none;"}
                  %li
                    Performance Color:
                    %input#performancecolor{:size => "10", :type => "text", :value => "blue"}/
                  %li
                    Range Colors:
                    %input#rangecolors{:size => "25", :type => "text", :value => "#D3DAFE,#A8B6FF,#7F94FF"}/
                  %li
                    Target Width:
                    %input#targetwidth{:size => "10", :type => "text", :value => "3"}/
                %ul.coptions.pieoptions{:style => "display: none;"}
                  %li
                    Slice Colors:
                    %input#slicecolors{:size => "25", :type => "text", :value => "#f00,#0f0,#00f"}/
                %ul.coptions.boxoptions{:style => "display: none;"}
                  %li
                    Box Line Color:
                    %input#boxlinecol{:size => "10", :type => "text", :value => "black"}/
                  %li
                    Box Fill Color:
                    %input#boxfillcol{:size => "10", :type => "text", :value => "#cdf"}/
                  %li
                    Whisker Color:
                    %input#whiskercol{:size => "10", :type => "text", :value => "black"}/
                  %li
                    Outlier Line Color:
                    %input#outlierlinecol{:size => "10", :type => "text", :value => "#333"}/
                  %li
                    Outlier Fill Color:
                    %input#outlierfillcol{:size => "10", :type => "text", :value => "white"}/
                  %li
                    Median Color:
                    %input#mediancol{:size => "10", :type => "text", :value => "red"}/
                  %li
                    Show Outliers:
                    %input#showoutliers{:checked => "checked", :type => "checkbox"}/
                  %li
                    Outlier IQR:
                    %input#outlieriqr{:size => "4", :type => "text", :value => "1.5"}/
                  %li
                    Target:
                    %input#boxtarget{:size => "10", :type => "text"}/
                %ul.coptions.boxoptions.bulletoptions{:style => "display: none;"}
                  %li
                    Target Color:
                    %input#targetcolor{:size => "10", :type => "text", :value => "#4a2"}/
          #ex1
            %p
              Mouse speed
              %span#mousespeed
                %canvas{:height => "16", :style => "display: inline-block; width: 60px; height: 16px; vertical-align: top;", :width => "60"}
            %p
              Inline
              %span.line
                %canvas{:height => "16", :style => "display: inline-block; width: 21px; height: 16px; vertical-align: top;", :width => "21"}
              line graphs
              %span.line
                %canvas{:height => "16", :style => "display: inline-block; width: 63px; height: 16px; vertical-align: top;", :width => "63"}
            %p
              Bar charts
              %span.bar
                %canvas{:height => "16", :style => "display: inline-block; width: 34px; height: 16px; vertical-align: top;", :width => "34"}
              negative values:
              %span.bar
                %canvas{:height => "16", :style => "display: inline-block; width: 29px; height: 16px; vertical-align: top;", :width => "29"}
            %p
              Composite inline
              %span#compositeline
                %canvas{:height => "16", :style => "display: inline-block; width: 63px; height: 16px; vertical-align: top;", :width => "63"}
            %p
              Inline with normal range
              %span#normalline
                %canvas{:height => "16", :style => "display: inline-block; width: 63px; height: 16px; vertical-align: top;", :width => "63"}
            %p
              Composite bar
              %span#compositebar
                %canvas{:height => "16", :style => "display: inline-block; width: 44px; height: 16px; vertical-align: top;", :width => "44"}
            %p
              Discrete
              %span.discrete1
                %canvas{:height => "16", :style => "display: inline-block; width: 36px; height: 16px; vertical-align: top;", :width => "36"}
              %br
                Discrete with threshold
                %span#discrete2
                  %canvas{:height => "16", :style => "display: inline-block; width: 18px; height: 16px; vertical-align: top;", :width => "18"}
            %p
              Customize size and colours
              %span#linecustom
                %canvas{:height => "22", :style => "display: inline-block; width: 115px; height: 22px; vertical-align: top;", :width => "115"}
            %p
              Tristate charts
              %span.tristate
                %canvas{:height => "16", :style => "display: inline-block; width: 59px; height: 16px; vertical-align: top;", :width => "59"}
              %br
                (think games won, lost or drawn)
            %p
              Tristate chart using a colour map:
              %span.tristatecols
                %canvas{:height => "16", :style => "display: inline-block; width: 59px; height: 16px; vertical-align: top;", :width => "59"}
            %p
              Box Plot:
              %span.boxplot
                %canvas{:height => "16", :style => "display: inline-block; width: 58px; height: 16px; vertical-align: top;", :width => "58"}
              %br
                Pre-computed box plot
                %span.boxplotraw
                  %canvas{:height => "16", :style => "display: inline-block; width: 58px; height: 16px; vertical-align: top;", :width => "58"}
                   