:css
  #draggableSample  {
  }
  #droppableSample  {
      background-color: maroon;
      color: white;
  }
  /***********************************************************************
   * Drag'n'drop support
   */
  /* Helper object */
  div.dynatree-drag-helper{ 
    border-width: 1px; 
    background-color: silver;
  }
  span.dynatree-drag-helper-img { 
    width: 16px;
    height: 16px;
    display: -moz-inline-box; /* @ FF 1+2 */
    display: inline-block; /* Required to make a span sizeable */
    vertical-align: top;
    background-repeat: no-repeat;
    background-position: left;
  }
  div.dynatree-drag-helper.dynatree-drop-accept{ 
    border-color: green; 
  }
  div.dynatree-drop-accept span.dynatree-drag-helper-img { 
    background-image: url("../src/skin/drop_accept.gif");
  }
  div.dynatree-drag-helper.dynatree-drop-reject{ 
    border-color: red; 
  }
  div.dynatree-drop-reject span.dynatree-drag-helper-img { 
    background-image: url("../src/skin/drop_reject.gif");
  }
  /* Source node while dragging */
  .dynatree-drag-source { 
    border: 1px dotted gray; 
  }
  /* Target node while dragging cursor is over it */
  .dynatree-drop-target { 
    border: 1px solid blue; 
  }
  .dynatree-drop-target a{ 
    background-repeat: no-repeat;
    background-position: right;
    background-image: url("../src/skin/drop_child.gif");
  }
  .dynatree-drop-target.dynatree-drop-accept { 
    border: 1px solid green; 
  }
  .dynatree-drop-target.dynatree-drop-reject { 
    border: 1px solid red; 
  }
  .dynatree-drop-target.dynatree-drop-after a { 
    background-repeat: repeat-x;
    background-position: bottom;
    background-image: url("../src/skin/drop_append.gif");
  }
    
:javascript
  $(function(){
        // --- Initialize first Dynatree -------------------------------------------
    $("#tree").dynatree({
      onActivate: function(dtnode) {
        $("#echoActive").text(dtnode.data.title + "(" + dtnode.data.key + ")");
      },
      onDeactivate: function(dtnode) {
        $("#echoActive").text("-");
      },
      dnd: {
        onDragStart: function(dtnode) {
          // This function MUST be defined to enable dragging for the tree.
          // Return `false` to cancel dragging of dtnode. 
          logMsg("tree.onDragStart(%o)", dtnode);
          if(dtnode.data.isFolder)
            return false;
          return true;
        },
        onDragStop: function(dtnode) {
          logMsg("tree.onDragStop(%o)", dtnode);
        }
      }
    });
    
    // --- Initialize second Dynatree ------------------------------------------
    $("#tree2").dynatree({
      idPrefix: "ui-dynatree-t2-",
      onActivate: function(dtnode) {
        $("#echoActive2").text(dtnode.data.title + "(" + dtnode.data.key + ")");
      },
      onDeactivate: function(dtnode) {
        $("#echoActive2").text("-");
      },
      dnd: {
        autoExpandMS: 1000,
        onDragEnter: function(node, sourceNode) {
          // Return `false` to disallow dropping sourceNode on node.
          // Return 'over', 'before, or 'after' to force a hitMode.
          logMsg("tree.onDragEnter(%o, %o)", node, sourceNode);
          if(node.data.isFolder)
            return false;
          //                return "over";
        },
        onDragOver: function(node, sourceNode, hitMode) {
          logMsg("tree.onDragOver(%o, %o, %o)", node, sourceNode, hitMode);
        },
        onDrop: function(node, sourceNode, hitMode) {
          // This function MUST be defined to enable dropping of items on the tree.
          logMsg("tree.onDrop(%o, %o)", node, sourceNode);
          var copynode;
          if(sourceNode) {
            copynode = sourceNode.toDict(true, function(dict){
              dict.title = "Copy of " + dict.title;
              delete dict.key; // Remove key, so a new one will be created
            });
          }else{
            copynode = {title: "This node was dropped here."};
          }
          node.addChild(copynode);
        },
        onDragLeave: function(node, sourceNode) {
          logMsg("tree.onDragLeave(%o, %o)", node, sourceNode);
        }
      }
    });
    
    // --- Initialize simple draggable sample ----------------------------------
    $("#draggableSample").draggable({
      revert: true,
      connectToDynatree: true,
      cursorAt: { top: -5, left:-5 },
      helper: "clone"
    });
    // --- Initialize simple droppable sample ----------------------------------
    $("#droppableSample").droppable({
      hoverClass: "drophover",
      addClasses: true,
      over: function(event, ui) {
        logMsg("droppable.over, %o, %o", event, ui);
      },
      drop: function(event, ui) {
        $(this).addClass('ui-state-highlight').find('p').html('Dropped!');
        alert("dropped");
      }
    });
  });
  