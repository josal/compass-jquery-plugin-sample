:javascript
  function afterSubmit(r, data, action) {
    if(r.responseText != "") { // If an error message is returned
      $('#submit_errors').html("<h1>Error</h1>\n<p>"+r.responseText+"</p>");
      $('#submit_errors').slideDown(); // Show div with error message      
      window.setTimeout(function() { // Hide error div after 6 seconds
        $('#submit_errors').slideUp();
      }, 6000);
      return false; // Don't remove this!
    }
    return true; // Don't remove this!
  }
  
  function handleSelection(id) {
    alert('ID selected : ' + id);
  }
  
  function pickDates(id) {
    jQuery("#"+id+"_lastname","#players_with_datepicker").datepicker({dateFormat:"yy-mm-dd"});
  }

= jqgrid("Football Players", "players", "/users", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "pseudo", :label => "Pseudo" }, { :field => "firstname", :label => "Firstname" }, { :field => "lastname", :label => "Lastname" }, { :field => "email", :label => "Email" }, { :field => "role", :label => "Role" } ], { :hidegrid => false, :height => "480" }, "", "", "", "" )
  
= jqgrid("Football Players", "players_2", "/users", [ { :field => "id", :label => "ID" }, { :field => "pseudo", :label => "Pseudo" }, { :field => "firstname", :label => "Firstname" }, { :field => "lastname", :label => "Lastname" }, { :field => "email", :label => "Email" }, { :field => "role", :label => "Role" } ], { :autowidth => true, :height => "480", :selection_handler => "handleSelection" } )

= jqgrid("Football Players", "players_3", "/users", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "pseudo", :label => "Pseudo" }, { :field => "firstname", :label => "Firstname" }, { :field => "lastname", :label => "Lastname" }, { :field => "email", :label => "Email" }, { :field => "role", :label => "Role" } ], { :height => "480", :selection_handler => "handleSelection", :direct_selection => true } )

= jqgrid("Football Players", "players_4", "/users", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "pseudo", :label => "Pseudo" }, { :field => "firstname", :label => "Firstname" }, { :field => "lastname", :label => "Lastname" }, { :field => "email", :label => "Email" }, { :field => "role", :label => "Role" } ], { :height => "480", :selection_handler => "handleSelection", :multi_selection => true } )

= jqgrid("Football Players", "players_5", "/users", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "pseudo", :label => "Pseudo" }, { :field => "firstname", :label => "Firstname" }, { :field => "lastname", :label => "Lastname" }, { :field => "email", :label => "Email" }, { :field => "role", :label => "Role" } ], { :height => "480", :master_details => true, :details_url => "/users/pets", :details_caption => "Pets" } )

= jqgrid("Pets", "players_5_details", "/users/pets", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "name", :label => "Name", :width => 500, :align => 'center' } ] )

= jqgrid("Football Players", "players_6", "/users", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "pseudo", :label => "Pseudo", :editable => true }, { :field => "firstname", :label => "Firstname", :editable => true }, { :field => "lastname", :label => "Lastname", :editable => true }, { :field => "email", :label => "Email", :editable => true }, { :field => "role", :label => "Role", :editable => true } ], { :height => "480", :add => true, :edit => true, :inline_edit => true, :delete => true, :edit_url => "/users/post_data" } )

= jqgrid("Football Players", "players_7", "/users", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "pseudo", :label => "Pseudo", :editable => true }, { :field => "firstname", :label => "Firstname", :editable => true }, { :field => "lastname", :label => "Lastname", :editable => true }, { :field => "email", :label => "Email", :editable => true }, { :field => "role", :label => "Role", :editable => true } ], { :height => "480", :add => true, :edit => true, :inline_edit => false, :delete => true, :edit_url => "/users/post_data", :error_handler => "afterSubmit" }, ", closeAfterEdit: true", ", closeAfterAdd: true", "" , "")

= jqgrid("Football Players", "players_8", "/users", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "pseudo", :label => "Pseudo", :editable => true }, { :field => "firstname", :label => "Firstname", :editable => true, :edittype => "checkbox", :editoptions => { :value => "Yes:No" } }, { :field => "lastname", :label => "Lastname", :editable => true }, { :field => "email", :label => "Email", :editable => true, :edittype => "textarea", :editoptions => { :rows => 3, :cols => 30 } }, { :field => "role", :label => "Role", :editable => true, :edittype => "select", :editoptions => { :value => [["admin","admin"], ["player", "player"], ["defender","defender"]] } } ], { :height => "480", :add => true, :edit => true, :inline_edit => true, :delete => true, :edit_url => "/users/post_data" } )

= jqgrid("Football Players", "players_with_datepicker", "/users", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "pseudo", :label => "Pseudo", :editable => true }, { :field => "firstname", :label => "Firstname", :editable => true, :edittype => "checkbox", :editoptions => { :value => "Yes:No" } }, { :field => "lastname", :label => "Lastname", :editable => true }, { :field => "email", :label => "Email", :editable => true, :edittype => "textarea", :editoptions => { :rows => 3, :cols => 30 } }, { :field => "role", :label => "Role", :editable => true, :edittype => "select", :editoptions => { :value => [["admin","admin"], ["player", "player"], ["defender","defender"]] } } ], { :height => "480", :add => true, :edit => true, :inline_edit => true, :delete => true, :edit_url => "/users/post_data", :inline_edit_handler => "pickDates" } )

= jqgrid("Football Players", "players_9", "/users", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "pseudo", :label => "Pseudo" }, { :field => "firstname", :label => "Firstname" }, { :field => "lastname", :label => "Lastname" }, { :field => "email", :label => "Email" }, { :field => "role", :label => "Role" } ], { :height => "480",  :subgrid => { :url => "/users/pets", :columns => [ { :field => "id", :label => "ID", :width => 35, :resizable => false, :editable => true }, { :field => "name", :label => "Name", :editable => true } ] } } )

= jqgrid("Football Players", "players_10", "/users", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "pseudo", :label => "Pseudo" }, { :field => "firstname", :label => "Firstname" }, { :field => "lastname", :label => "Lastname" }, { :field => "email", :label => "Email" }, { :field => "role", :label => "Role" } ], { :height => "480",  :subgrid => { :url => "/users/pets", :edit_url => "/users/post_pets_data", :add => true, :inline_edit => true, :delete => true, :columns => [ { :field => "id", :label => "ID", :width => 35, :resizable => false, :editable => true }, { :field => "name", :label => "Name", :editable => true } ] } } )

= jqgrid("Football Players", "players_11", "/users", [ { :field => "id", :label => "ID", :width => 35, :resizable => false }, { :field => "pseudo", :label => "Pseudo" }, { :field => "firstname", :label => "Firstname" }, { :field => "lastname", :label => "Lastname" }, { :field => "email", :label => "Email" }, { :field => "role", :label => "Role" } ], { :height => "480",  :subgrid => { :url => "/users/pets", :direct_selection => true, :selection_handler => "handleSubSelection", :columns => [ { :field => "id", :label => "ID", :width => 35, :resizable => false, :editable => true }, { :field => "name", :label => "Name", :editable => true } ] } } )
